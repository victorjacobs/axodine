function roundTo(e,t){if(typeof e=="number")return+(Math.round(e+"e+"+t)+"e-"+t);else return e}function roundToWithThousands(e,t,n){if((e.decimalSeparator!="."||e.thousandSeparator!="")&&typeof t=="string"){var r=""+t;if(e.thousandSeparator!=""){while(r.indexOf(e.thousandSeparator)>=0)r=""+r.replace(e.thousandSeparator,"")}if(e.decimalSeparator!=".")r=""+r.replace(e.decimalSeparator,".");r=fmtChartJS(e,1*roundTo(1*r,n),"none");return r}else{return fmtChartJS(e,1*roundTo(t,n),"none")}}function fmtChartJSPerso(e,t,n){switch(n){case"SampleJS_Format":if(typeof t=="number")return_value="My Format : "+t.toString()+" $";else return_value=t+"XX";break;case"Change_Month":if(typeof t=="string")return_value=t.toString()+" 2014";else return_value=t.toString()+"YY";break;default:return_value=t;break}return return_value}function fmtChartJS(e,t,n){var r;if(n=="notformatted"){r=t}else if(n=="none"&&typeof t=="number"){if(e.decimalSeparator!="."||e.thousandSeparator!=""){r=t.toString().replace(/\./g,e.decimalSeparator);if(e.thousandSeparator!=""){var i=r;var s="";var o=i.indexOf(e.decimalSeparator);if(o>=0){s=i.substring(o+1,i.length);s=s.split("").reverse().join("");i=i.substring(0,o)}i=i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e.thousandSeparator);s=s.split("").reverse().join("");r=i;if(s!="")r=r+e.decimalSeparator+s}}else r=t}else{r=fmtChartJSPerso(e,t,n)}return r}function tmplbis(e,t){var n=!/\W/.test(e)?cachebis[e]=cachebis[e]||tmplbis(document.getElementById(e).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return t?n(t):n}function createCursorDiv(){if(cursorDivCreated==false){var e=document.createElement("divCursor");e.id="divCursor";e.style.position="absolute";document.body.appendChild(e);cursorDivCreated=true}}function checkBrowser(){this.ver=navigator.appVersion;this.dom=document.getElementById?1:0;this.ie5=this.ver.indexOf("MSIE 5")>-1&&this.dom?1:0;this.ie4=document.all&&!this.dom?1:0;this.ns5=this.dom&&parseInt(this.ver)>=5?1:0;this.ns4=document.layers&&!this.dom?1:0;this.bw=this.ie5||this.ie4||this.ns4||this.ns5;return this}function cursorInit(){scrolled=bw.ns4||bw.ns5?"window.pageYOffset":"document.body.scrollTop";if(bw.ns4)document.captureEvents(Event.MOUSEMOVE)}function makeCursorObj(obj,nest){createCursorDiv();nest=!nest?"":"document."+nest+".";this.css=bw.dom?document.getElementById(obj).style:bw.ie4?document.all[obj].style:bw.ns4?eval(nest+"document.layers."+obj):0;this.moveIt=b_moveIt;cursorInit();return this}function b_moveIt(e,t){this.x=e;this.y=t;this.css.left=this.x+"px";this.css.top=this.y+"px"}function isIE(){var e=navigator.userAgent.toLowerCase();return e.indexOf("msie")!=-1?parseInt(e.split("msie")[1]):false}function mergeChartConfig(e,t){var n={};for(var r in e){n[r]=e[r]}for(var r in t){n[r]=t[r]}return n}function sleep(e){var t=new Date;t.setTime(t.getTime()+e);while((new Date).getTime()<t.getTime());}function saveCanvas(e,t,n,r){cvSave=e.getImageData(0,0,e.canvas.width,e.canvas.height);var i={savePng:false,annotateDisplay:false,animation:false,dynamicDisplay:false};var s=mergeChartConfig(n,i);s.clearRect=false;switch(r){case"Bar":(new Chart(e.canvas.getContext("2d"))).Bar(t,s);break;case"Pie":(new Chart(e.canvas.getContext("2d"))).Pie(t,s);break;case"Doughnut":(new Chart(e.canvas.getContext("2d"))).Doughnut(t,s);break;case"Radar":(new Chart(e.canvas.getContext("2d"))).Radar(t,s);break;case"PolarArea":(new Chart(e.canvas.getContext("2d"))).PolarArea(t,s);break;case"HorizontalBar":(new Chart(e.canvas.getContext("2d"))).HorizontalBar(t,s);break;case"StackedBar":(new Chart(e.canvas.getContext("2d"))).StackedBar(t,s);break;case"HorizontalStackedBar":(new Chart(e.canvas.getContext("2d"))).HorizontalStackedBar(t,s);break;case"Line":(new Chart(e.canvas.getContext("2d"))).Line(t,s);break}document.location.href=e.canvas.toDataURL("image/png").replace("image/png","image/octet-stream");e.putImageData(cvSave,0,0)}function dynamicFunction(e,t,n,r){if(t.dynamicDisplay){if(typeof dynamicDisplay[n.canvas.id]=="undefined"){dynamicDisplayList[dynamicDisplayList["length"]]=n.canvas.id;dynamicDisplay[n.canvas.id]=[n.canvas,false,false,e,t,n.canvas,r];dynamicDisplay[n.canvas.id][1]=isScrolledIntoView(n.canvas);window.onscroll=scrollFunction}if(dynamicDisplay[n.canvas.id][1]==false||dynamicDisplay[n.canvas.id][2]==true)return false;dynamicDisplay[n.canvas.id][2]=true}return true}function isScrolledIntoView(e){var t=0;var n=0;elem=e;while(elem){t+=elem.offsetLeft-elem.scrollLeft+elem.clientLeft;n+=elem.offsetTop-elem.scrollTop+elem.clientTop;elem=elem.offsetParent}if(t+e.width/2>=window.pageXOffset&&t+e.width/2<=window.pageXOffset+window.innerWidth&&n+e.height/2>=window.pageYOffset&&n+e.height/2<=window.pageYOffset+window.innerHeight)return true;else return false}function scrollFunction(){for(var e=0;e<dynamicDisplayList["length"];e++){if(isScrolledIntoView(dynamicDisplay[dynamicDisplayList[e]][5])&&dynamicDisplay[dynamicDisplayList[e]][2]==false){dynamicDisplay[dynamicDisplayList[e]][1]=true;switch(dynamicDisplay[dynamicDisplayList[e]][6]){case"Bar":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).Bar(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"Pie":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).Pie(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"Doughnut":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).Doughnut(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"Radar":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).Radar(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"PolarArea":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).PolarArea(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"HorizontalBar":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).HorizontalBar(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"StackedBar":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).StackedBar(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"HorizontalStackedBar":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).HorizontalStackedBar(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break;case"Line":(new Chart(document.getElementById(dynamicDisplayList[e]).getContext("2d"))).Line(dynamicDisplay[dynamicDisplayList[e]][3],dynamicDisplay[dynamicDisplayList[e]][4]);break}}}}function getMousePos(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function doMouseMove(ctx,config,event){font="<font face="+config.annotateFontFamily+" size="+config.annotateFontSize+'px style="font-style:'+config.annotateFontStyle+";color:"+config.annotateFontColor+'">';var annotateDIV=document.getElementById("divCursor");annotateDIV.innerHTML="";annotateDIV.style.border="";annotateDIV.style.backgroundColor="";canvas_pos=getMousePos(ctx.canvas,event);for(i=0;i<jsGraphAnnotate[ctx.canvas.id]["length"];i++){if(jsGraphAnnotate[ctx.canvas.id][i][0]=="ARC"){distance=Math.sqrt((canvas_pos.x-jsGraphAnnotate[ctx.canvas.id][i][1])*(canvas_pos.x-jsGraphAnnotate[ctx.canvas.id][i][1])+(canvas_pos.y-jsGraphAnnotate[ctx.canvas.id][i][2])*(canvas_pos.y-jsGraphAnnotate[ctx.canvas.id][i][2]));if(distance>jsGraphAnnotate[ctx.canvas.id][i][3]&&distance<jsGraphAnnotate[ctx.canvas.id][i][4]){angle=Math.acos((canvas_pos.x-jsGraphAnnotate[ctx.canvas.id][i][1])/distance);if(canvas_pos.y<jsGraphAnnotate[ctx.canvas.id][i][2])angle=-angle;while(angle<0){angle+=2*Math.PI}while(angle>2*Math.PI){angle-=2*Math.PI}if(angle<config.startAngle*(Math.PI/360))angle+=2*Math.PI;if(angle>jsGraphAnnotate[ctx.canvas.id][i][5]&&angle<jsGraphAnnotate[ctx.canvas.id][i][6]||angle>jsGraphAnnotate[ctx.canvas.id][i][5]-2*Math.PI&&angle<jsGraphAnnotate[ctx.canvas.id][i][6]-2*Math.PI||angle>jsGraphAnnotate[ctx.canvas.id][i][5]+2*Math.PI&&angle<jsGraphAnnotate[ctx.canvas.id][i][6]+2*Math.PI){annotateDIV.style.border=config.annotateBorder;annotateDIV.style.padding=config.annotatePadding;annotateDIV.style.borderRadius=config.annotateBorderRadius;annotateDIV.style.backgroundColor=config.annotateBackgroundColor;v1=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][7],config.fmtV1);v2=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][8],config.fmtV2);v3=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][9],config.fmtV3);v4=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][10],config.fmtV4);v5=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][11],config.fmtV5);v6=fmtChartJS(config,100*jsGraphAnnotate[ctx.canvas.id][i][8]/jsGraphAnnotate[ctx.canvas.id][i][10],config.fmtV6);v7=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][1],config.fmtV7);v8=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][2],config.fmtV8);v9=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][3],config.fmtV9);v10=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][4],config.fmtV10);v11=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][5],config.fmtV11);v12=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][6],config.fmtV12);v13=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][12],config.fmtV13);graphPosX=canvas_pos.x;graphPosY=canvas_pos.y;dispString=tmplbis(config.annotateLabel,{config:config,v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,v13:v13,graphPosX:graphPosX,graphPosY:graphPosY});annotateDIV.innerHTML=font+dispString+"</font>";x=bw.ns4||bw.ns5?event.pageX:event.x;y=bw.ns4||bw.ns5?event.pageY:event.y;if(bw.ie4||bw.ie5)y=y+eval(scrolled);oCursor.moveIt(x+fromLeft,y+fromTop)}}}else if(jsGraphAnnotate[ctx.canvas.id][i][0]=="RECT"){if(canvas_pos.x>jsGraphAnnotate[ctx.canvas.id][i][1]&&canvas_pos.x<jsGraphAnnotate[ctx.canvas.id][i][3]&&canvas_pos.y<jsGraphAnnotate[ctx.canvas.id][i][2]&&canvas_pos.y>jsGraphAnnotate[ctx.canvas.id][i][4]){annotateDIV.style.border=config.annotateBorder;annotateDIV.style.padding=config.annotatePadding;annotateDIV.style.borderRadius=config.annotateBorderRadius;annotateDIV.style.backgroundColor=config.annotateBackgroundColor;v1=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][5],config.fmtV1);v2=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][6],config.fmtV2);v3=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][7],config.fmtV3);v4=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][8],config.fmtV4);v5=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][9],config.fmtV5);v6=fmtChartJS(config,100*jsGraphAnnotate[ctx.canvas.id][i][7]/jsGraphAnnotate[ctx.canvas.id][i][9],config.fmtV6);v7=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][1],config.fmtV7);v8=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][2],config.fmtV8);v9=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][3],config.fmtV9);v10=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][4],config.fmtV10);v11=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][10],config.fmtV11);v12=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][11],config.fmtV12);graphPosX=canvas_pos.x;graphPosY=canvas_pos.y;dispString=tmplbis(config.annotateLabel,{config:config,v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,graphPosX:graphPosX,graphPosY:graphPosY});annotateDIV.innerHTML=font+dispString+"</font>";x=bw.ns4||bw.ns5?event.pageX:event.x;y=bw.ns4||bw.ns5?event.pageY:event.y;if(bw.ie4||bw.ie5)y=y+eval(scrolled);oCursor.moveIt(x+fromLeft,y+fromTop)}}else if(jsGraphAnnotate[ctx.canvas.id][i][0]=="POINT"){distance=Math.sqrt((canvas_pos.x-jsGraphAnnotate[ctx.canvas.id][i][1])*(canvas_pos.x-jsGraphAnnotate[ctx.canvas.id][i][1])+(canvas_pos.y-jsGraphAnnotate[ctx.canvas.id][i][2])*(canvas_pos.y-jsGraphAnnotate[ctx.canvas.id][i][2]));if(distance<10){annotateDIV.style.border=config.annotateBorder;annotateDIV.style.padding=config.annotatePadding;annotateDIV.style.borderRadius=config.annotateBorderRadius;annotateDIV.style.backgroundColor=config.annotateBackgroundColor;v1=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][3],config.fmtV1);v2=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][4],config.fmtV2);v3=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][5],config.fmtV3);v4=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][6],config.fmtV4);v5=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][7],config.fmtV5);v6=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][8],config.fmtV6);v7=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][9],config.fmtV7);v8=fmtChartJS(config,100*jsGraphAnnotate[ctx.canvas.id][i][5]/jsGraphAnnotate[ctx.canvas.id][i][9],config.fmtV8);v9=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][1],config.fmtV9);v10=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][2],config.fmtV10);v11=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][10],config.fmtV11);v12=fmtChartJS(config,jsGraphAnnotate[ctx.canvas.id][i][11],config.fmtV12);graphPosX=canvas_pos.x;graphPosY=canvas_pos.y;dispString=tmplbis(config.annotateLabel,{config:config,v1:v1,v2:v2,v3:v3,v4:v4,v5:v5,v6:v6,v7:v7,v8:v8,v9:v9,v10:v10,v11:v11,v12:v12,graphPosX:graphPosX,graphPosY:graphPosY});annotateDIV.innerHTML=font+dispString+"</font>";x=bw.ns4||bw.ns5?event.pageX:event.x;y=bw.ns4||bw.ns5?event.pageY:event.y;if(bw.ie4||bw.ie5)y=y+eval(scrolled);oCursor.moveIt(x+fromLeft,y+fromTop)}}}}var charJSPersonnalDefaultOptions={};var charJSPersonnalDefaultOptionsLine={};var charJSPersonnalDefaultOptionsRadar={};var charJSPersonnalDefaultOptionsPolarArea={};var charJSPersonnalDefaultOptionsPie={};var charJSPersonnalDefaultOptionsDoughnut={};var charJSPersonnalDefaultOptionsBar={};var charJSPersonnalDefaultOptionsStackedBar={};var charJSPersonnalDefaultOptionsHorizontalBar={};var charJSPersonnalDefaultOptionsHorizontalStackedBar={};var cachebis={};cursorDivCreated=false;bw=new checkBrowser;fromLeft=10;fromTop=10;if(typeof String.prototype.trim!=="function"){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}var dynamicDisplay=new Array;var dynamicDisplayList=new Array;var jsGraphAnnotate=new Array;window.Chart=function(e){function v(e,t,n,r){if(!e.logarithmic){var i=n.steps*n.stepValue;var s=t-n.graphMin;var o=N(s/i,1,0);return r*n.steps*o}else{return N(_(t)*r-b(n.graphMin)*r,undefined,0)}}function m(e,t,r,i,s,o,u,a,f,l,c,h,p){function b(){var n=e.animation?N(m(y),null,0):1;if(1*d>=1*N(e.animationSteps,Number.MAX_VALUE,1)||e.animation==false)n=1;else if(n>=1)n=.9999;if(!(isIE()<9&&isIE()!=false)&&e.clearRect)i.clearRect(s,o,u,a);O(i,e,f,l,c,h,false,p,n);if(e.scaleOverlay){r(n);t()}else{t();r(n)}O(i,e,f,l,c,h,true,p,n)}function w(){d++;y+=v;if(d==e.animationSteps||e.animation==false)y=1;b();if(y<1){g(w)}else{if(typeof e.onAnimationComplete=="function")e.onAnimationComplete()}}var d=0;if(isIE()<9&&isIE()!=false)e.animation=false;var v=e.animation?1/N(e.animationSteps,Number.MAX_VALUE,1):1,m=n[e.animationEasing],y=e.animation?0:1;if(typeof t!=="function")t=function(){};if(e.clearRect)g(w);else w();}function y(e,t,n,r,i,s){var o,u,a,f,l,c,h,p;if(!e.logarithmic){c=r-i;h=b(c);o=Math.floor(i/(1*Math.pow(10,h)))*Math.pow(10,h);u=Math.ceil(r/(1*Math.pow(10,h)))*Math.pow(10,h)}else{o=Math.pow(10,b(i));u=Math.pow(10,b(r)+1);h=b(u)-b(o)}a=u-o;f=Math.pow(10,h);l=Math.round(a/f);if(!e.logarithmic){while(l<n||l>t){if(l<n){f/=2;l=Math.round(a/f)}else{f*=2;l=Math.round(a/f)}}}else{l=h}var d=[];w(e,s,d,l,o,u,f);return{steps:l,stepValue:f,graphMin:o,labels:d,maxValue:r}}function b(e){return Math.floor(Math.log(e)/Math.LN10)}function w(e,t,n,r,i,s,o){if(t){if(!e.logarithmic){for(var u=0;u<r+1;u++){n.push(A(t,{value:fmtChartJS(e,1*(i+o*u).toFixed(C(o)),e.fmtYLabel)}))}}else{var a=i;while(a<s){n.push(A(t,{value:fmtChartJS(e,1*a.toFixed(C(o)),e.fmtYLabel)}));a*=10}}}}function E(e){return Math.max.apply(Math,e)}function S(e){return Math.min.apply(Math,e)}function x(e,t){if(!e){return t}else{return e}}function T(e){return!isNaN(parseFloat(e))&&isFinite(e)}function N(e,t,n){if(T(t)){if(e>t){return t}}if(T(n)){if(e<n){return n}}return e}function C(e){var t;if(e%1!=0){return e.toString().split(".")[1].length}else{return 0}}function k(e,t){var n={};for(var r in e){n[r]=e[r]}for(var r in t){n[r]=t[r]}return n}function A(e,t){var n=!/\W/.test(e)?L[e]=L[e]||A(document.getElementById(e).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};"+"with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return t?n(t):n}function O(t,n,r,i,s,o,u,a,f){var l,c,h,p,d,v;for(l=0;l<n.crossText.length;l++){if(n.crossText[l]!=""&&n.crossTextOverlay[S([l,n.crossTextOverlay.length-1])]==u){t.save();t.beginPath();t.font=n.crossTextFontStyle[S([l,n.crossTextFontStyle.length-1])]+" "+n.crossTextFontSize[S([l,n.crossTextFontSize.length-1])]+"px "+n.crossTextFontFamily[S([l,n.crossTextFontFamily.length-1])];t.fillStyle=n.crossTextFontColor[S([l,n.crossTextFontColor.length-1])];textAlign=n.crossTextAlign[S([l,n.crossTextAlign.length-1])];textBaseline=n.crossTextBaseline[S([l,n.crossTextBaseline.length-1])];h=1*n.crossTextPosX[S([l,n.crossTextPosX.length-1])];p=1*n.crossTextPosY[S([l,n.crossTextPosY.length-1])];switch(1*n.crossTextRelativePosX[S([l,n.crossTextRelativePosX.length-1])]){case 0:if(textAlign=="default")textAlign="left";break;case 1:h+=s;if(textAlign=="default")textAlign="right";break;case 2:h+=r;if(textAlign=="default")textAlign="center";break;case-2:h+=e.canvas.width/2;if(textAlign=="default")textAlign="center";break;case 3:h+=h+2*r-s;if(textAlign=="default")textAlign="left";break;case 4:h+=e.canvas.width;if(textAlign=="default")textAlign="right";break;default:h+=r;if(textAlign=="default")textAlign="center";break}switch(1*n.crossTextRelativePosY[S([l,n.crossTextRelativePosY.length-1])]){case 0:if(textBaseline=="default")textBaseline="top";break;case 3:p+=o;if(textBaseline=="default")textBaseline="top";break;case 2:p+=i;if(textBaseline=="default")textBaseline="middle";break;case-2:p+=e.canvas.height/2;if(textBaseline=="default")textBaseline="middle";break;case 1:p+=p+2*i-o;if(textBaseline=="default")textBaseline="bottom";break;case 4:p+=e.canvas.height;if(textBaseline=="default")textBaseline="bottom";break;default:p+=i;if(textBaseline=="default")textBaseline="middle";break}t.textAlign=textAlign;t.textBaseline=textBaseline;t.translate(1*h,1*p);t.rotate(n.crossTextAngle[S([l,n.crossTextAngle.length-1])]);if(n.crossText[l].substring(0,1)=="%"){if(typeof n.crossTextFunction=="function")c=n.crossTextFunction(l,n.crossText[l],t,n,r,i,s,o,u,a,f)}else c=n.crossText[l];t.fillText(c,0,0);t.stroke();t.restore()}}}function M(e,t,n,r,i,s,o,u,a,f){if(t.canvasBackgroundColor!="none")n.canvas.style.background=t.canvasBackgroundColor;var l=0;var c=0;var h=0;var p=0;var d=0;var v=0;var m=0;var g=0;var y=0;var b=0;var w=0;var S=0;var x=0;var T=0;var N=0;var C=0;var k=0;var L=0;var A=0;var O=0;var c=0;var h=0;var M=0;var _=0;var D=1;var P=0;var H=0;var B=0;var j=0;if(t.canvasBorders)l=t.canvasBordersWidth;if(a){n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;for(var F=0;F<e.labels.length;F++){var I=n.measureText(fmtChartJS(t,e.labels[F],t.fmtXLabel)).width;D=I>D?I:D}}widestYLabel=1;if(a){if(s!=null){n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;for(var F=s.length-1;F>=0;F--){if(typeof s[F]=="string"){if(s[F].trim()!=""){var I=n.measureText(fmtChartJS(t,s[F],t.fmtYLabel)).width;widestYLabel=I>widestYLabel?I:widestYLabel}}}}}P=l+t.spaceLeft;H=l+t.spaceRight;if(a){if(typeof t.yAxisLabel!="undefined"){if(t.yAxisLabel.trim()!=""){c=t.yAxisFontSize+t.yAxisLabelSpaceLeft+t.yAxisLabelSpaceRight;yAxisLabelPosLeft=l+t.spaceLeft+t.yAxisLabelSpaceLeft+t.yAxisFontSize;yAxisLabelPosRight=i-l-t.spaceRight-t.yAxisLabelSpaceRight-t.yAxisFontSize}}if(t.yAxisLeft){if(u==false)P=l+t.spaceLeft+c+widestYLabel+3+t.yAxisSpaceLeft+t.yAxisSpaceRight;else P=l+t.spaceLeft+c+D+3+t.yAxisSpaceLeft+t.yAxisSpaceRight}if(t.yAxisRight){if(u==false)H=l+t.spaceRight+c+widestYLabel+3+t.yAxisSpaceLeft+t.yAxisSpaceRight;else H=l+t.spaceRight+c+D+3+t.yAxisSpaceLeft+t.yAxisSpaceRight}}availableWidth=i-P-H;if(t.graphTitle.trim()!=""){p=t.graphTitleFontSize+t.graphTitleSpaceBefore+t.graphTitleSpaceAfter;d=l+t.spaceTop+p-t.graphTitleSpaceAfter}if(t.graphSubTitle.trim()!=""){v=t.graphSubTitleFontSize+t.graphSubTitleSpaceBefore+t.graphSubTitleSpaceAfter;m=l+t.spaceTop+p+v-t.graphSubTitleSpaceAfter}if(a){if(typeof t.yAxisUnit!="undefined"){if(t.yAxisUnit.trim()!=""){b=t.yAxisUnitFontSize+t.yAxisUnitSpaceBefore+t.yAxisUnitSpaceAfter;w=l+t.spaceTop+p+v+b-t.yAxisUnitSpaceAfter}}}topNotUsableSize=l+t.spaceTop+p+v+b+t.graphSpaceBefore;if(typeof t.footNote!="undefined"){if(t.footNote.trim()!=""){g=t.footNoteFontSize+t.footNoteSpaceBefore+t.footNoteSpaceAfter;y=r-t.spaceBottom-l-t.footNoteSpaceAfter}}if(typeof t.legend!="undefined"){if(t.legend==true){n.font=t.legendFontStyle+" "+t.legendFontSize+"px "+t.legendFontFamily;if(f){for(var F=e.datasets.length-1;F>=0;F--){if(typeof e.datasets[F].title=="string"){if(e.datasets[F].title.trim()!=""){x++;var I=n.measureText(e.datasets[F].title).width;S=I>S?I:S}}}}else{for(var F=e.length-1;F>=0;F--){if(typeof e[F].title=="string"){if(e[F].title.trim()!=""){x++;var I=n.measureText(e[F].title).width;S=I>S?I:S}}}}if(x>1){S+=t.legendBlockSize+t.legendSpaceBetweenBoxAndText;availableLegendWidth=i-t.spaceLeft-t.spaceRight-2*l-t.legendSpaceLeftText-t.legendSpaceRightText;if(t.legendBorders==true)availableLegendWidth-=2*t.legendBordersWidth-t.legendBordersSpaceLeft-t.legendBordersSpaceRight;maxLegendOnLine=Math.floor((availableLegendWidth+t.legendSpaceBetweenTextHorizontal)/(S+t.legendSpaceBetweenTextHorizontal));T=Math.ceil(x/maxLegendOnLine);N=Math.ceil(x/T);C=T*(t.legendFontSize+t.legendSpaceBetweenTextVertical)-t.legendSpaceBetweenTextVertical+t.legendSpaceBeforeText+t.legendSpaceAfterText;L=r-l-t.spaceBottom-g-C+t.legendSpaceBeforeText+t.legendFontSize;k=t.spaceLeft+(i-t.spaceLeft-t.spaceRight-N*(S+t.legendSpaceBetweenTextHorizontal)+t.legendSpaceBetweenTextHorizontal)/2;if(t.legendBorders==true){C+=2*t.legendBordersWidth+t.legendBordersSpaceBefore+t.legendBordersSpaceAfter;L-=t.legendBordersWidth+t.legendBordersSpaceAfter;O=Math.floor(r-l-t.spaceBottom-g-C+t.legendBordersWidth/2+t.legendBordersSpaceBefore);A=Math.floor(k-t.legendSpaceLeftText-t.legendBordersWidth/2);legendBorderHeight=Math.ceil(C-t.legendBordersWidth)-t.legendBordersSpaceBefore-t.legendBordersSpaceAfter;legendBorderWidth=Math.ceil(N*(S+t.legendSpaceBetweenTextHorizontal))-t.legendSpaceBetweenTextHorizontal+t.legendBordersWidth+t.legendSpaceRightText+t.legendSpaceLeftText}}}}if(a){if(typeof t.xAxisLabel!="undefined"){if(t.xAxisLabel.trim()!=""){M=t.xAxisFontSize+t.xAxisLabelSpaceBefore+t.xAxisLabelSpaceAfter;xAxisLabelPos=r-l-t.spaceBottom-g-C-t.xAxisLabelSpaceAfter}}}xLabelWidth=0;if(a&&(t.xAxisBottom||t.xAxisTop)){if(u==false){widestLabel=D;nblab=e.labels.length}else{widestLabel=widestYLabel;nblab=s.length}if(t.rotateLabels=="smart"){B=0;if((availableWidth+t.xAxisSpaceBetweenLabels)/nblab<widestLabel+t.xAxisSpaceBetweenLabels){B=45;if(availableWidth/nblab<Math.abs(Math.cos(B*Math.PI/180)*widestLabel)){B=90}}}else{B=t.rotateLabels;if(B<0)B=0;if(B>180)B=180}if(B>90)B+=180;_=Math.abs(Math.sin(B*Math.PI/180)*widestLabel)+Math.abs(Math.sin((B+90)*Math.PI/180)*t.scaleFontSize)+t.xAxisSpaceBefore+t.xAxisSpaceAfter;j=r-l-t.spaceBottom-g-C-M-(_-t.xAxisSpaceBefore);xLabelWidth=Math.abs(Math.cos(B*Math.PI/180)*widestLabel)+Math.abs(Math.cos((B+90)*Math.PI/180)*t.scaleFontSize);P=E([P,l+t.spaceLeft+xLabelWidth/2]);H=E([H,l+t.spaceRight+xLabelWidth/2]);availableWidth=i-P-H}if(t.xAxisBottom){bottomNotUsableHeightWithoutXLabels=l+t.spaceBottom+g+C+M;bottomNotUsableHeightWithXLabels=bottomNotUsableHeightWithoutXLabels+_;availableHeight=r-topNotUsableSize-bottomNotUsableHeightWithXLabels}else{bottomNotUsableHeightWithoutXLabels=l+t.spaceBottom+g+C+M;bottomNotUsableHeightWithXLabels=bottomNotUsableHeightWithoutXLabels;availableHeight=r-topNotUsableSize-bottomNotUsableHeightWithXLabels}if(l>0){n.save();n.beginPath();n.lineWidth=2*l;n.strokeStyle=t.canvasBordersColor;n.moveTo(0,0);n.lineTo(0,r);n.lineTo(i,r);n.lineTo(i,0);n.lineTo(0,0);n.stroke();n.restore()}if(p>0){n.save();n.beginPath();n.font=t.graphTitleFontStyle+" "+t.graphTitleFontSize+"px "+t.graphTitleFontFamily;n.fillStyle=t.graphTitleFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(t.spaceLeft+(i-t.spaceLeft-t.spaceRight)/2,d);n.fillText(t.graphTitle,0,0);n.stroke();n.restore()}if(v>0){n.save();n.beginPath();n.font=t.graphSubTitleFontStyle+" "+t.graphSubTitleFontSize+"px "+t.graphSubTitleFontFamily;n.fillStyle=t.graphSubTitleFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(t.spaceLeft+(i-t.spaceLeft-t.spaceRight)/2,m);n.fillText(t.graphSubTitle,0,0);n.stroke();n.restore()}if(b>0){if(t.yAxisLeft){n.save();n.beginPath();n.font=t.yAxisUnitFontStyle+" "+t.yAxisUnitFontSize+"px "+t.yAxisUnitFontFamily;n.fillStyle=t.yAxisUnitFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(P,w);n.fillText(t.yAxisUnit,0,0);n.stroke();n.restore()}if(t.yAxisRight){n.save();n.beginPath();n.font=t.yAxisUnitFontStyle+" "+t.yAxisUnitFontSize+"px "+t.yAxisUnitFontFamily;n.fillStyle=t.yAxisUnitFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(i-H,w);n.fillText(t.yAxisUnit,0,0);n.stroke();n.restore()}}if(c>0){if(t.yAxisLeft){n.save();n.beginPath();n.font=t.yAxisFontStyle+" "+t.yAxisFontSize+"px "+t.yAxisFontFamily;n.fillStyle=t.yAxisFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(yAxisLabelPosLeft,topNotUsableSize+availableHeight/2);n.rotate(-(90*(Math.PI/180)));n.fillText(t.yAxisLabel,0,0);n.stroke();n.restore()}if(t.yAxisRight){n.save();n.beginPath();n.font=t.yAxisFontStyle+" "+t.yAxisFontSize+"px "+t.yAxisFontFamily;n.fillStyle=t.yAxisFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(yAxisLabelPosRight,topNotUsableSize+availableHeight/2);n.rotate(+(90*(Math.PI/180)));n.fillText(t.yAxisLabel,0,0);n.stroke();n.restore()}}if(M>0){if(t.xAxisBottom){n.save();n.beginPath();n.font=t.xAxisFontStyle+" "+t.xAxisFontSize+"px "+t.xAxisFontFamily;n.fillStyle=t.xAxisFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(P+availableWidth/2,xAxisLabelPos);n.fillText(t.xAxisLabel,0,0);n.stroke();n.restore()}}if(x>1){if(t.legendBorders==true){n.save();n.beginPath();n.lineWidth=t.legendBordersWidth;n.strokeStyle=t.legendBordersColors;n.moveTo(A,O);n.lineTo(A,O+legendBorderHeight);n.lineTo(A+legendBorderWidth,O+legendBorderHeight);n.lineTo(A+legendBorderWidth,O);n.lineTo(A,O);n.lineTo(A+legendBorderWidth,O);n.lineTo(A,O);n.lineTo(A,O+legendBorderHeight);n.stroke();n.restore()}nbcols=N-1;ypos=L-(t.legendFontSize+t.legendSpaceBetweenTextVertical);xpos=0;if(f)fromi=e.datasets.length;else fromi=e.length;for(var F=fromi-1;F>=0;F--){orderi=F;if(o){if(f)orderi=e.datasets.length-F-1;else orderi=e.length-F-1}if(f)tpof=typeof e.datasets[orderi].title;else tpof=typeof e[orderi].title;if(tpof=="string"){if(f)lgtxt=e.datasets[orderi].title.trim();else lgtxt=e[orderi].title.trim();if(lgtxt!=""){nbcols++;if(nbcols==N){nbcols=0;xpos=k;ypos+=t.legendFontSize+t.legendSpaceBetweenTextVertical}else{xpos+=S+t.legendSpaceBetweenTextHorizontal}n.save();n.beginPath();if(f)n.strokeStyle=e.datasets[orderi].strokeColor;else n.strokeStyle=e[orderi].color;if(t.datasetFill){n.lineWidth=1;n.moveTo(xpos,ypos);n.lineTo(xpos+t.legendBlockSize,ypos);n.lineTo(xpos+t.legendBlockSize,ypos-t.legendFontSize);n.lineTo(xpos,ypos-t.legendFontSize);n.lineTo(xpos,ypos);n.closePath();if(f)n.fillStyle=e.datasets[orderi].fillColor;else n.fillStyle=e[orderi].color;n.fill()}else{n.lineWidth=t.datasetStrokeWidth;n.moveTo(xpos+2,ypos-t.legendFontSize/2);n.lineTo(xpos+2+t.legendBlockSize,ypos-t.legendFontSize/2)}n.stroke();n.restore();n.save();n.beginPath();n.font=t.legendFontStyle+" "+t.legendFontSize+"px "+t.legendFontFamily;n.fillStyle=t.legendFontColor;n.textAlign="left";n.textBaseline="bottom";n.translate(xpos+t.legendBlockSize+t.legendSpaceBetweenBoxAndText,ypos);n.fillText(lgtxt,0,0);n.stroke();n.restore()}}}}if(t.footNote.trim()!=""){n.save();n.font=t.footNoteFontStyle+" "+t.footNoteFontSize+"px "+t.footNoteFontFamily;n.fillStyle=t.footNoteFontColor;n.textAlign="center";n.textBaseline="bottom";n.translate(P+availableWidth/2,y);n.fillText(t.footNote,0,0);n.stroke();n.restore()}clrx=P;clrwidth=availableWidth;clry=topNotUsableSize;clrheight=availableHeight;return{leftNotUsableSize:P,rightNotUsableSize:H,availableWidth:availableWidth,topNotUsableSize:topNotUsableSize,bottomNotUsableHeightWithoutXLabels:bottomNotUsableHeightWithoutXLabels,bottomNotUsableHeightWithXLabels:bottomNotUsableHeightWithXLabels,availableHeight:availableHeight,widestXLabel:D,rotateLabels:B,xLabelPos:j,clrx:clrx,clry:clry,clrwidth:clrwidth,clrheight:clrheight}}function _(e){return Math.log(e)/Math.LN10}function D(e,t){if(t.clearRect){s(e);e.clearRect(0,0,r,i)}else{s(e);e.clearRect(0,0,r,i);e.fillStyle=t.savePngBackgroundColor;e.strokeStyle=t.savePngBackgroundColor;e.beginPath();e.moveTo(0,0);e.lineTo(0,e.canvas.height);e.lineTo(e.canvas.width,e.canvas.height);e.lineTo(e.canvas.width,0);e.lineTo(0,0);e.stroke();e.fill()}}function P(e,t,n,r){if(n.annotateDisplay==true){if(cursorDivCreated==false)oCursor=new makeCursorObj("divCursor");if(isIE()<9&&isIE()!=false)e.canvas.attachEvent("on"+n.annotateFunction.split(" ")[0],function(t){if(n.annotateFunction.split(" ")[1]=="left"&&t.which==1||n.annotateFunction.split(" ")[1]=="middle"&&t.which==2||n.annotateFunction.split(" ")[1]=="right"&&t.which==3||typeof n.annotateFunction.split(" ")[1]!="string")doMouseMove(e,n,t)});else e.canvas.addEventListener(n.annotateFunction.split(" ")[0],function(t){if(n.annotateFunction.split(" ")[1]=="left"&&t.which==1||n.annotateFunction.split(" ")[1]=="middle"&&t.which==2||n.annotateFunction.split(" ")[1]=="right"&&t.which==3||typeof n.annotateFunction.split(" ")[1]!="string")doMouseMove(e,n,t)},false)}if(n.savePng){if(isIE()<9&&isIE()!=false)e.canvas.attachEvent("on"+n.savePngFunction.split(" ")[0],function(i){if(n.savePngFunction.split(" ")[1]=="left"&&i.which==1||n.savePngFunction.split(" ")[1]=="middle"&&i.which==2||n.savePngFunction.split(" ")[1]=="right"&&i.which==3||typeof n.savePngFunction.split(" ")[1]!="string")saveCanvas(e,t,n,r)});else e.canvas.addEventListener(n.savePngFunction.split(" ")[0],function(i){if(n.savePngFunction.split(" ")[1]=="left"&&i.which==1||n.savePngFunction.split(" ")[1]=="middle"&&i.which==2||n.savePngFunction.split(" ")[1]=="right"&&i.which==3||typeof n.savePngFunction.split(" ")[1]!="string")saveCanvas(e,t,n,r)},false)}}var t=this;var n={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){if((e/=1/2)<1)return 1/2*e*e;return-1/2*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){if((e/=1/2)<1)return 1/2*e*e*e;return 1/2*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){if((e/=1/2)<1)return 1/2*e*e*e*e;return-1/2*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){if((e/=1/2)<1)return 1/2*e*e*e*e*e;return 1/2*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-1/2*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return e==0?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return e==1?1:1*(-Math.pow(2,-10*e/1)+1)},easeInOutExpo:function(e){if(e==0)return 0;if(e==1)return 1;if((e/=1/2)<1)return 1/2*Math.pow(2,10*(e-1));return 1/2*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){if(e>=1)return e;return-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){if((e/=1/2)<1)return-1/2*(Math.sqrt(1-e*e)-1);return 1/2*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158;var n=0;var r=1;if(e==0)return 0;if((e/=1)==1)return 1;if(!n)n=1*.3;if(r<Math.abs(1)){r=1;var t=n/4}else var t=n/(2*Math.PI)*Math.asin(1/r);return-(r*Math.pow(2,10*(e-=1))*Math.sin((e*1-t)*2*Math.PI/n))},easeOutElastic:function(e){var t=1.70158;var n=0;var r=1;if(e==0)return 0;if((e/=1)==1)return 1;if(!n)n=1*.3;if(r<Math.abs(1)){r=1;var t=n/4}else var t=n/(2*Math.PI)*Math.asin(1/r);return r*Math.pow(2,-10*e)*Math.sin((e*1-t)*2*Math.PI/n)+1},easeInOutElastic:function(e){var t=1.70158;var n=0;var r=1;if(e==0)return 0;if((e/=1/2)==2)return 1;if(!n)n=1*.3*1.5;if(r<Math.abs(1)){r=1;var t=n/4}else var t=n/(2*Math.PI)*Math.asin(1/r);if(e<1)return-.5*r*Math.pow(2,10*(e-=1))*Math.sin((e*1-t)*2*Math.PI/n);return r*Math.pow(2,-10*(e-=1))*Math.sin((e*1-t)*2*Math.PI/n)*.5+1},easeInBack:function(e){var t=1.70158;return 1*(e/=1)*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return 1*((e=e/1-1)*e*((t+1)*e+t)+1)},easeInOutBack:function(e){var t=1.70158;if((e/=1/2)<1)return 1/2*e*e*(((t*=1.525)+1)*e-t);return 1/2*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:function(e){return 1-n.easeOutBounce(1-e)},easeOutBounce:function(e){if((e/=1)<1/2.75){return 1*7.5625*e*e}else if(e<2/2.75){return 1*(7.5625*(e-=1.5/2.75)*e+.75)}else if(e<2.5/2.75){return 1*(7.5625*(e-=2.25/2.75)*e+.9375)}else{return 1*(7.5625*(e-=2.625/2.75)*e+.984375)}},easeInOutBounce:function(e){if(e<1/2)return n.easeInBounce(e*2)*.5;return n.easeOutBounce(e*2-1)*.5+1*.5}};var r=e.canvas.width;var i=e.canvas.height;if(window.devicePixelRatio){e.canvas.style.width=r+"px";e.canvas.style.height=i+"px";e.canvas.height=i*window.devicePixelRatio;e.canvas.width=r*window.devicePixelRatio;e.scale(window.devicePixelRatio,window.devicePixelRatio)}this.PolarArea=function(n,r){t.PolarArea.defaults={inGraphDataShow:false,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ roundToWithThousands(config,v2,2) + ' (' + roundToWithThousands(config,v6,1) + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,scaleOverlay:true,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:true,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:true,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:true,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ roundToWithThousands(config,v2,2) + ' (' + roundToWithThousands(config,v6,1) + ' %)'%>",startAngle:90};t.PolarArea.defaults=k(t.defaults.commonOptions,t.PolarArea.defaults);t.PolarArea.defaults=k(t.PolarArea.defaults,charJSPersonnalDefaultOptions);t.PolarArea.defaults=k(t.PolarArea.defaults,charJSPersonnalDefaultOptionsPolarArea);var i=r?k(t.PolarArea.defaults,r):t.PolarArea.defaults;return new o(n,i,e)};this.Radar=function(n,r){t.Radar.defaults={inGraphDataShow:false,inGraphDataPaddingRadius:5,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleShowLine:true,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:false,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowLabelBackdrop:true,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,angleShowLineOut:true,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:12,pointLabelFontColor:"#666",pointDot:true,pointDotRadius:3,pointDotStrokeWidth:1,datasetStroke:true,datasetStrokeWidth:2,datasetFill:true,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? '/' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + roundToWithThousands(config,v3,2)%>",startAngle:90,graphMaximized:false};t.Radar.defaults=k(t.defaults.commonOptions,t.Radar.defaults);t.Radar.defaults=k(t.Radar.defaults,charJSPersonnalDefaultOptions);t.Radar.defaults=k(t.Radar.defaults,charJSPersonnalDefaultOptionsRadar);var i=r?k(t.Radar.defaults,r):t.Radar.defaults;return new u(n,i,e)};this.Pie=function(n,r){t.Pie.defaults={inGraphDataShow:false,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ roundToWithThousands(config,v2,2) + ' (' + roundToWithThousands(config,v6,1) + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,graphMaximized:true,segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animation:true,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ roundToWithThousands(config,v2,2) + ' (' + roundToWithThousands(config,v6,1) + ' %)'%>",startAngle:90,radiusScale:1};t.Pie.defaults=k(t.defaults.commonOptions,t.Pie.defaults);t.Pie.defaults=k(t.Pie.defaults,charJSPersonnalDefaultOptions);t.Pie.defaults=k(t.Pie.defaults,charJSPersonnalDefaultOptionsPie);var i=r?k(t.Pie.defaults,r):t.Pie.defaults;return new a(n,i,e)};this.Doughnut=function(n,r){t.Doughnut.defaults={inGraphDataShow:false,inGraphDataPaddingRadius:5,inGraphDataPaddingAngle:0,inGraphDataTmpl:"<%=(v1 == ''? '' : v1+':')+ roundToWithThousands(config,v2,2) + ' (' + roundToWithThousands(config,v6,1) + ' %)'%>",inGraphDataAlign:"off-center",inGraphDataVAlign:"off-center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataRadiusPosition:3,inGraphDataAnglePosition:2,segmentShowStroke:true,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animation:true,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:true,animateScale:false,onAnimationComplete:null,annotateLabel:"<%=(v1 == ''? '' : v1+':')+ roundToWithThousands(config,v2,2) + ' (' + roundToWithThousands(config,v6,1) + ' %)'%>",startAngle:90,radiusScale:1};t.Doughnut.defaults=k(t.defaults.commonOptions,t.Doughnut.defaults);t.Doughnut.defaults=k(t.Doughnut.defaults,charJSPersonnalDefaultOptions);t.Doughnut.defaults=k(t.Doughnut.defaults,charJSPersonnalDefaultOptionsDoughnut);var i=r?k(t.Doughnut.defaults,r):t.Doughnut.defaults;return new f(n,i,e)};this.Line=function(n,r){t.Line.defaults={inGraphDataShow:false,inGraphDataPaddingX:3,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,showYAxisMin:true,rotateLabels:"smart",logarithmic:false,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,bezierCurve:true,pointDot:true,pointDotRadius:4,pointDotStrokeWidth:2,datasetStroke:true,datasetStrokeWidth:2,datasetFill:true,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? '/' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + roundToWithThousands(config,v3,2)%>"};t.Line.defaults=k(t.defaults.commonOptions,t.Line.defaults);t.Line.defaults=k(t.defaults.xyAxisCommonOptions,t.Line.defaults);t.Line.defaults=k(t.Line.defaults,charJSPersonnalDefaultOptions);t.Line.defaults=k(t.Line.defaults,charJSPersonnalDefaultOptionsLine);var i=r?k(t.Line.defaults,r):t.Line.defaults;return new l(n,i,e)};this.StackedBar=function(n,r){t.StackedBar.defaults={inGraphDataShow:false,inGraphDataPaddingX:0,inGraphDataPaddingY:-3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"top",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,showYAxisMin:true,rotateLabels:"smart",scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? '/' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + roundToWithThousands(config,v3,2) + ' (' + roundToWithThousands(config,v6,1) + ' %)'%>"};t.StackedBar.defaults=k(t.defaults.commonOptions,t.StackedBar.defaults);t.StackedBar.defaults=k(t.defaults.xyAxisCommonOptions,t.StackedBar.defaults);t.StackedBar.defaults=k(t.StackedBar.defaults,charJSPersonnalDefaultOptions);t.StackedBar.defaults=k(t.StackedBar.defaults,charJSPersonnalDefaultOptionsStackedBar);var i=r?k(t.StackedBar.defaults,r):t.StackedBar.defaults;return new c(n,i,e)};this.HorizontalStackedBar=function(n,r){t.HorizontalStackedBar.defaults={inGraphDataShow:false,inGraphDataPaddingX:-3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"right",inGraphDataVAlign:"center",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:true,rotateLabels:"smart",barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? '/' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + roundToWithThousands(config,v3,2) + ' (' + roundToWithThousands(config,v6,1) + ' %)'%>"};t.HorizontalStackedBar.defaults=k(t.defaults.commonOptions,t.HorizontalStackedBar.defaults);t.HorizontalStackedBar.defaults=k(t.defaults.xyAxisCommonOptions,t.HorizontalStackedBar.defaults);t.HorizontalStackedBar.defaults=k(t.HorizontalStackedBar.defaults,charJSPersonnalDefaultOptions);t.HorizontalStackedBar.defaults=k(t.HorizontalStackedBar.defaults,charJSPersonnalDefaultOptionsHorizontalStackedBar);var i=r?k(t.HorizontalStackedBar.defaults,r):t.HorizontalStackedBar.defaults;return new h(n,i,e)};this.Bar=function(n,r){t.Bar.defaults={inGraphDataShow:false,inGraphDataPaddingX:0,inGraphDataPaddingY:3,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"center",inGraphDataVAlign:"bottom",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:2,inGraphDataYPosition:3,scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,showYAxisMin:true,rotateLabels:"smart",logarithmic:false,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? '/' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + roundToWithThousands(config,v3,2) + ' (' + roundToWithThousands(config,v6,1) + ' %)'%>"};t.Bar.defaults=k(t.defaults.commonOptions,t.Bar.defaults);t.Bar.defaults=k(t.defaults.xyAxisCommonOptions,t.Bar.defaults);t.Bar.defaults=k(t.Bar.defaults,charJSPersonnalDefaultOptions);t.Bar.defaults=k(t.Bar.defaults,charJSPersonnalDefaultOptionsBar);var i=r?k(t.Bar.defaults,r):t.Bar.defaults;return new p(n,i,e)};this.HorizontalBar=function(n,r){t.HorizontalBar.defaults={inGraphDataShow:false,inGraphDataPaddingX:3,inGraphDataPaddingY:0,inGraphDataTmpl:"<%=v3%>",inGraphDataAlign:"left",inGraphDataVAlign:"middle",inGraphDataRotate:0,inGraphDataFontFamily:"'Arial'",inGraphDataFontSize:12,inGraphDataFontStyle:"normal",inGraphDataFontColor:"#666",inGraphDataXPosition:3,inGraphDataYPosition:2,scaleOverlay:false,scaleOverride:false,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value%>",scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleShowGridLines:true,scaleXGridLinesStep:1,scaleYGridLinesStep:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleTickSizeLeft:5,scaleTickSizeRight:5,scaleTickSizeBottom:5,scaleTickSizeTop:5,showYAxisMin:true,rotateLabels:"smart",barShowStroke:true,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,animation:true,animationSteps:60,animationEasing:"easeOutQuart",onAnimationComplete:null,annotateLabel:"<%=(v1 == '' ? '' : v1) + (v1!='' && v2 !='' ? '/' : '')+(v2 == '' ? '' : v2)+(v1!='' || v2 !='' ? ':' : '') + roundToWithThousands(config,v3,2) + ' (' + roundToWithThousands(config,v6,1) + ' %)'%>"};t.HorizontalBar.defaults=k(t.defaults.commonOptions,t.HorizontalBar.defaults);t.HorizontalBar.defaults=k(t.defaults.xyAxisCommonOptions,t.HorizontalBar.defaults);t.HorizontalBar.defaults=k(t.HorizontalBar.defaults,charJSPersonnalDefaultOptions);t.HorizontalBar.defaults=k(t.HorizontalBar.defaults,charJSPersonnalDefaultOptionsHorizontalBar);var i=r?k(t.HorizontalBar.defaults,r):t.HorizontalBar.defaults;return new d(n,i,e)};t.defaults={};t.defaults.commonOptions={clearRect:true,dynamicDisplay:false,graphSpaceBefore:5,graphSpaceAfter:5,canvasBorders:false,canvasBackgroundColor:"none",canvasBordersWidth:3,canvasBordersColor:"black",graphTitle:"",graphTitleFontFamily:"'Arial'",graphTitleFontSize:24,graphTitleFontStyle:"bold",graphTitleFontColor:"#666",graphTitleSpaceBefore:5,graphTitleSpaceAfter:5,graphSubTitle:"",graphSubTitleFontFamily:"'Arial'",graphSubTitleFontSize:18,graphSubTitleFontStyle:"normal",graphSubTitleFontColor:"#666",graphSubTitleSpaceBefore:5,graphSubTitleSpaceAfter:5,footNote:"",footNoteFontFamily:"'Arial'",footNoteFontSize:8,footNoteFontStyle:"bold",footNoteFontColor:"#666",footNoteSpaceBefore:5,footNoteSpaceAfter:5,legend:false,legendFontFamily:"'Arial'",legendFontSize:12,legendFontStyle:"normal",legendFontColor:"#666",legendBlockSize:15,legendBorders:true,legendBordersWidth:1,legendBordersColors:"#666",legendBordersSpaceBefore:5,legendBordersSpaceAfter:5,legendBordersSpaceLeft:5,legendBordersSpaceRight:5,legendSpaceBeforeText:5,legendSpaceAfterText:5,legendSpaceLeftText:5,legendSpaceRightText:5,legendSpaceBetweenTextVertical:5,legendSpaceBetweenTextHorizontal:5,legendSpaceBetweenBoxAndText:5,annotateDisplay:false,savePng:false,savePngFunction:"mousedown right",savePngBackgroundColor:"WHITE",annotateFunction:"mousemove",annotateFontFamily:"'Arial'",annotateBorder:"none",annotateBorderRadius:"2px",annotateBackgroundColor:"rgba(0,0,0,0.8)",annotateFontSize:4,annotateFontColor:"white",annotateFontStyle:"normal",annotatePadding:"3px",crossText:[""],crossTextOverlay:[true],crossTextFontFamily:["'Arial'"],crossTextFontSize:[12],crossTextFontStyle:["normal"],crossTextFontColor:["rgba(220,220,220,1)"],crossTextRelativePosX:[2],crossTextRelativePosY:[2],crossTextBaseline:["middle"],crossTextAlign:["center"],crossTextPosX:[0],crossTextPosY:[0],crossTextAngle:[0],crossTextFunction:null,spaceTop:0,spaceBottom:0,spaceRight:0,spaceLeft:0,decimalSeparator:".",thousandSeparator:"",fmtV1:"none",fmtV2:"none",fmtV3:"none",fmtV4:"none",fmtV5:"none",fmtV6:"none",fmtV7:"none",fmtV8:"none",fmtV9:"none",fmtV10:"none",fmtV11:"none",fmtV12:"none",fmtV13:"none",fmtXLabel:"none",fmtYLabel:"none",fmtLegend:"none"};t.defaults.xyAxisCommonOptions={yAxisLeft:true,yAxisRight:false,xAxisBottom:true,xAxisTop:false,xAxisSpaceBetweenLabels:5,yAxisLabel:"",yAxisFontFamily:"'Arial'",yAxisFontSize:16,yAxisFontStyle:"normal",yAxisFontColor:"#666",yAxisLabelSpaceRight:5,yAxisLabelSpaceLeft:5,yAxisSpaceRight:5,yAxisSpaceLeft:5,xAxisLabel:"",xAxisFontFamily:"'Arial'",xAxisFontSize:16,xAxisFontStyle:"normal",xAxisFontColor:"#666",xAxisLabelSpaceBefore:5,xAxisLabelSpaceAfter:5,xAxisSpaceBefore:5,xAxisSpaceAfter:5,yAxisUnit:"",yAxisUnitFontFamily:"'Arial'",yAxisUnitFontSize:8,yAxisUnitFontStyle:"normal",yAxisUnitFontColor:"#666",yAxisUnitSpaceBefore:5,yAxisUnitSpaceAfter:5};var s=function(e){e.clearRect(0,0,r,i)};var o=function(e,t,n){function x(r){var i=-t.startAngle*(Math.PI/180)+2*Math.PI,s=0,a=0,f=1,l=1;a=0;for(var c=0;c<e.length;c++)if(!(typeof e[c].value=="undefined"))a++;a=Math.PI*2/a;while(i<0){i+=2*Math.PI}while(i>2*Math.PI){i-=2*Math.PI}if(t.animation){if(t.animateScale){f=r}if(t.animateRotate){l=r}}if(r>=1){totvalue=0;for(var c=0;c<e.length;c++)if(!(typeof e[c].value=="undefined"))totvalue+=1*e[c].value}for(var c=0;c<e.length;c++){if(!(typeof e[c].value=="undefined")){n.beginPath();n.arc(p,d,f*v(t,1*e[c].value,u,o),i,i+l*a,false);n.lineTo(p,d);n.closePath();n.fillStyle=e[c].color;n.fill();i+=a;if(t.segmentShowStroke){n.strokeStyle=t.segmentStrokeColor;n.lineWidth=t.segmentStrokeWidth;n.stroke()}}}if(r>=1){i=-t.startAngle*(Math.PI/180)+2*Math.PI;for(var c=0;c<e.length;c++){if(!(typeof e[c].value=="undefined")){s+=1*e[c].value;i+=a;if(typeof e[c].title=="string")lgtxt=e[c].title.trim();else lgtxt="";jsGraphAnnotate[n.canvas.id][b++]=["ARC",p,d,0,v(t,1*e[c].value,u,o),i-a,i,lgtxt,1*e[c].value,s,totvalue,a,c];if(t.inGraphDataShow){if(t.inGraphDataAnglePosition==1)posAngle=g+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==2)posAngle=g-a/2+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==3)posAngle=g-a+t.inGraphDataPaddingAngle*(Math.PI/180);if(t.inGraphDataRadiusPosition==1)labelRadius=0+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==2)labelRadius=v(t,1*e[c].value,u,o)/2+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==3)labelRadius=v(t,1*e[c].value,u,o)+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==4)labelRadius=o*u.steps+t.inGraphDataPaddingRadius;n.save();if(t.inGraphDataAlign=="off-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2)n.textAlign="left";else n.textAlign="right"}else if(t.inGraphDataAlign=="to-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2)n.textAlign="right";else n.textAlign="left"}else n.textAlign=t.inGraphDataAlign;if(t.inGraphDataVAlign=="off-center"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="top";else n.textBaseline="bottom"}else if(t.inGraphDataVAlign=="to-center"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="bottom";else n.textBaseline="top"}else n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;var h=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,1*e[c].value,t.fmtV2),v3:fmtChartJS(t,s,t.fmtV3),v4:fmtChartJS(t,totvalue,t.fmtV4),v5:fmtChartJS(t,a,t.fmtV5),v6:fmtChartJS(t,100*e[c].value/totvalue,t.fmtV6),v7:fmtChartJS(t,p,t.fmtV7),v8:fmtChartJS(t,d,t.fmtV8),v9:fmtChartJS(t,0,t.fmtV9),v10:fmtChartJS(t,v(t,1*e[c].value,u,o),t.fmtV10),v11:fmtChartJS(t,i-a,t.fmtV11),v12:fmtChartJS(t,a,t.fmtV12),v13:fmtChartJS(t,c,t.fmtV13)});n.translate(p+labelRadius*Math.cos(posAngle),d-labelRadius*Math.sin(posAngle));if(t.inGraphDataRotate=="inRadiusAxis")n.rotate(2*Math.PI-posAngle);else if(t.inGraphDataRotate=="inRadiusAxisRotateLabels"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2)n.rotate(3*Math.PI-posAngle);else n.rotate(2*Math.PI-posAngle)}else n.rotate(t.inGraphDataRotate*(Math.PI/180));n.fillText(h,0,0);n.restore();g-=a}}}}}function T(){for(var e=0;e<u.steps;e++){if(t.scaleShowLine){n.beginPath();n.arc(p,d,o*(e+1),0,Math.PI*2,true);n.strokeStyle=t.scaleLineColor;n.lineWidth=t.scaleLineWidth;n.stroke()}if(t.scaleShowLabels){n.textAlign="center";n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;var r=u.labels[e+1];if(t.scaleShowLabelBackdrop){var i=n.measureText(r).width;n.fillStyle=t.scaleBackdropColor;n.beginPath();n.rect(Math.round(p-i/2-t.scaleBackdropPaddingX),Math.round(d-o*(e+1)-t.scaleFontSize*.5-t.scaleBackdropPaddingY),Math.round(i+t.scaleBackdropPaddingX*2),Math.round(t.scaleFontSize+t.scaleBackdropPaddingY*2));n.fill()}n.textBaseline="middle";n.fillStyle=t.scaleFontColor;n.fillText(r,p,d-o*(e+1))}}}function N(){var n=Number.MIN_VALUE;var r=Number.MAX_VALUE;for(var i=0;i<e.length;i++){if(e[i].value>n){n=1*e[i].value}if(e[i].value<r){r=1*e[i].value}}if(Math.abs(n-r)<1e-8){n=E([n*2,1]);r=0}if(!isNaN(t.graphMin))r=t.graphMin;if(!isNaN(t.graphMax))n=t.graphMax;var s=Math.floor(f/(a*.66));var o=Math.floor(f/a*.5);return{maxValue:n,minValue:r,maxSteps:s,minSteps:o}}var s,o,u,a,f,l,c,h,p,d;if(!dynamicFunction(e,t,n,"PolarArea"))return;var g=t.startAngle*(Math.PI/180)+2*Math.PI;while(t.startAngle<0){t.startAngle+=360}while(t.startAngle>360){t.startAngle-=360}while(g<0){g+=2*Math.PI}while(g>2*Math.PI){g-=2*Math.PI}t.logarithmic=false;var b=0;jsGraphAnnotate[n.canvas.id]=new Array;P(n,e,t,"PolarArea");D(n,t);l=N();c=t.scaleShowLabels?t.scaleLabel:"";if(!t.scaleOverride){u=y(t,l.maxSteps,l.minSteps,l.maxValue,l.minValue,c);h=M(e,t,n,i,r,u.labels,true,false,false,false)}else{u={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,graphMax:t.scaleStartValue+t.scaleSteps*t.scaleStepWidth,labels:[]};w(t,c,u.labels,u.steps,t.scaleStartValue,u.graphMax,t.scaleStepWidth);h=M(e,t,n,i,r,u.labels,true,false,false,false)}p=h.leftNotUsableSize+h.availableWidth/2;d=h.topNotUsableSize+h.availableHeight/2;o=Math.floor((S([h.availableHeight,h.availableWidth])/2-5)/u.steps);m(t,T,x,n,h.clrx,h.clry,h.clrwidth,h.clrheight,p,d,p-(S([h.availableHeight,h.availableWidth])/2-5),d+(S([h.availableHeight,h.availableWidth])/2-5),e);};var u=function(e,t,n){function b(r){var i=new Array;var s=new Array;for(var a=0;a<e.datasets.length;a++){for(var f=0;f<e.datasets[a].data.length;f++){i[f]=0;s[f]=-999999999}}for(var a=0;a<e.datasets.length;a++){for(var f=0;f<e.datasets[a].data.length;f++){if(!(typeof e.datasets[a].data[f]=="undefined")){i[f]+=1*e.datasets[a].data[f];s[f]=E([s[f],1*e.datasets[a].data[f]])}}}var l=2*Math.PI/e.datasets[0].data.length;n.save();for(var a=0;a<e.datasets.length;a++){if(r>=1){if(typeof e.datasets[a].title=="string")lgtxt=e.datasets[a].title.trim();else lgtxt=""}var c=-1;for(var f=0;f<e.datasets[a].data.length;f++){if(!(typeof e.datasets[a].data[f]=="undefined")){if(c==-1){n.beginPath();n.moveTo(p+r*Math.cos(t.startAngle*Math.PI/180-f*l)*v(t,e.datasets[a].data[f],u,o),d-r*Math.sin(t.startAngle*Math.PI/180-f*l)*v(t,e.datasets[a].data[f],u,o));c=f}else{n.lineTo(p+r*Math.cos(t.startAngle*Math.PI/180-f*l)*v(t,e.datasets[a].data[f],u,o),d-r*Math.sin(t.startAngle*Math.PI/180-f*l)*v(t,e.datasets[a].data[f],u,o))}if(r>=1){if(a==0)divprev=0;else divprev=e.datasets[a].data[f]-e.datasets[a-1].data[f];if(a==e.datasets.length-1)divnext=0;else divnext=e.datasets[a+1].data[f]-e.datasets[a].data[f];if(typeof e.labels[f]=="string")lgtxt2=e.labels[f].trim();else lgtxt2="";jsGraphAnnotate[n.canvas.id][g++]=["POINT",p+Math.cos(t.startAngle*Math.PI/180-f*l)*v(t,e.datasets[a].data[f],u,o),d-Math.sin(t.startAngle*Math.PI/180-f*l)*v(t,e.datasets[a].data[f],u,o),lgtxt,lgtxt2,1*e.datasets[a].data[f],divprev,divnext,s[f],i[f],a,f]}}}n.closePath();n.fillStyle=e.datasets[a].fillColor;n.strokeStyle=e.datasets[a].strokeColor;n.lineWidth=t.datasetStrokeWidth;n.fill();n.stroke();if(t.pointDot){n.beginPath();n.fillStyle=e.datasets[a].pointColor;n.strokeStyle=e.datasets[a].pointStrokeColor;n.lineWidth=t.pointDotStrokeWidth;for(var h=0;h<e.datasets[a].data.length;h++){if(!(typeof e.datasets[a].data[h]=="undefined")){n.beginPath();n.arc(p+r*Math.cos(t.startAngle*Math.PI/180-h*l)*v(t,e.datasets[a].data[h],u,o),d-r*Math.sin(t.startAngle*Math.PI/180-h*l)*v(t,e.datasets[a].data[h],u,o),t.pointDotRadius,2*Math.PI,false);n.fill();n.stroke()}}}}n.restore();if(r>=1&&t.inGraphDataShow){for(var a=0;a<e.datasets.length;a++){if(typeof e.datasets[a].title=="string")lgtxt=e.datasets[a].title.trim();else lgtxt="";for(var f=0;f<e.datasets[a].data.length;f++){if(!(typeof e.datasets[a].data[f]=="undefined")){if(a==0)divprev=0;else divprev=e.datasets[a].data[f]-e.datasets[a-1].data[f];if(a==e.datasets.length-1)divnext=0;else divnext=e.datasets[a+1].data[f]-e.datasets[a].data[f];if(typeof e.labels[f]=="string")lgtxt2=e.labels[f].trim();else lgtxt2="";n.save();n.textAlign=t.inGraphDataAlign;n.textBaseline=t.inGraphDataVAlign;if(t.inGraphDataAlign=="off-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(f*l+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(f*l+2*Math.PI)%(2*Math.PI)<Math.PI/2)n.textAlign="left";else n.textAlign="right"}else if(t.inGraphDataAlign=="to-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(f*l+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(f*l+2*Math.PI)%(2*Math.PI)<Math.PI/2)n.textAlign="right";else n.textAlign="left"}else n.textAlign=t.inGraphDataAlign;if(t.inGraphDataVAlign=="off-center"){if((f*l+2*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="bottom";else n.textBaseline="top"}else if(t.inGraphDataVAlign=="to-center"){if((f*l+2*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="top";else n.textBaseline="bottom"}else n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;var m;if(t.inGraphDataRadiusPosition==1)m=0+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==2)m=v(t,e.datasets[a].data[f],u,o)/2+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==3)m=v(t,e.datasets[a].data[f],u,o)+t.inGraphDataPaddingRadius;n.translate(p+Math.cos(t.startAngle*Math.PI/180-f*l)*m,d-Math.sin(t.startAngle*Math.PI/180-f*l)*m);if(t.inGraphDataRotate=="inRadiusAxis")n.rotate(f*l);else if(t.inGraphDataRotate=="inRadiusAxisRotateLabels"){if((f*l+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(f*l+2*Math.PI)%(2*Math.PI)<3*Math.PI/2)n.rotate(3*Math.PI+f*l);else n.rotate(2*Math.PI+f*l)}else n.rotate(t.inGraphDataRotate*(Math.PI/180));var y=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,lgtxt2,t.fmtV2),v3:fmtChartJS(t,1*e.datasets[a].data[f],t.fmtV3),v4:fmtChartJS(t,divprev,t.fmtV4),v5:fmtChartJS(t,divnext,t.fmtV5),v6:fmtChartJS(t,s[f],t.fmtV6),v7:fmtChartJS(t,i[f],t.fmtV7),v8:fmtChartJS(t,100*e.datasets[a].data[f]/i[f],t.fmtV8),v9:fmtChartJS(t,p+Math.cos(t.startAngle*Math.PI/180-f*l)*v(t,e.datasets[a].data[f],u,o),t.fmtV9),v10:fmtChartJS(t,d-Math.sin(t.startAngle*Math.PI/180-f*l)*v(t,e.datasets[a].data[f],u,o),t.fmtV10),v11:fmtChartJS(t,a,t.fmtV11),v12:fmtChartJS(t,f,t.fmtV12)});n.fillText(y,0,0);n.restore()}}}}}function S(){var r=2*Math.PI/e.datasets[0].data.length;n.save();n.translate(p,d);n.rotate((90-t.startAngle)*Math.PI/180);if(t.angleShowLineOut){n.strokeStyle=t.angleLineColor;n.lineWidth=t.angleLineWidth;for(var i=0;i<e.datasets[0].data.length;i++){n.rotate(r);n.beginPath();n.moveTo(0,0);n.lineTo(0,-s);n.stroke()}}for(var a=0;a<u.steps;a++){n.beginPath();if(t.scaleShowLine){n.strokeStyle=t.scaleLineColor;n.lineWidth=t.scaleLineWidth;n.moveTo(0,-o*(a+1));for(var f=0;f<e.datasets[0].data.length;f++){n.rotate(r);n.lineTo(0,-o*(a+1))}n.closePath();n.stroke()}}n.rotate(-(90-t.startAngle)*Math.PI/180);if(t.scaleShowLabels){for(var a=0;a<u.steps;a++){n.textAlign="center";n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;n.textBaseline="middle";if(t.scaleShowLabelBackdrop){var l=n.measureText(u.labels[a+1]).width;n.fillStyle=t.scaleBackdropColor;n.beginPath();n.rect(Math.round(Math.cos(t.startAngle*Math.PI/180)*o*(a+1)-l/2-t.scaleBackdropPaddingX),Math.round(-Math.sin(t.startAngle*Math.PI/180)*o*(a+1)-t.scaleFontSize*.5-t.scaleBackdropPaddingY),Math.round(l+t.scaleBackdropPaddingX*2),Math.round(t.scaleFontSize+t.scaleBackdropPaddingY*2));n.fill()}n.fillStyle=t.scaleFontColor;n.fillText(u.labels[a+1],Math.cos(t.startAngle*Math.PI/180)*o*(a+1),-Math.sin(t.startAngle*Math.PI/180)*o*(a+1))}}for(var c=0;c<e.labels.length;c++){n.font=t.pointLabelFontStyle+" "+t.pointLabelFontSize+"px "+t.pointLabelFontFamily;n.fillStyle=t.pointLabelFontColor;var h=Math.sin((90-t.startAngle)*Math.PI/180+r*c)*(s+t.pointLabelFontSize);var v=Math.cos((90-t.startAngle)*Math.PI/180+r*c)*(s+t.pointLabelFontSize);var m=(90-t.startAngle)*Math.PI/180+r*c;while(m<0)m=m+2*Math.PI;while(m>2*Math.PI)m=m-2*Math.PI;if(m==Math.PI||m==0){n.textAlign="center"}else if(m>Math.PI){n.textAlign="right"}else{n.textAlign="left"}n.textBaseline="middle";n.fillText(e.labels[c],h,-v)}n.restore()}function T(){var r,i,o,u,f,l,c,d;var v=2*Math.PI/e.datasets[0].data.length;var m=t.startAngle*Math.PI/180;n.font=t.pointLabelFontStyle+" "+t.pointLabelFontSize+"px "+t.pointLabelFontFamily;if(!t.graphMaximized){u=h.availableWidth/2;o=h.availableWidth/2;l=1}else{u=h.availableWidth/2;o=h.availableWidth/2;l=40;for(var g=0;g<e.labels.length;g++){var y=n.measureText(e.labels[g]).width+t.scaleFontSize;i=(h.availableWidth-y)/(1+Math.abs(Math.cos(m)));if(m<Math.PI/2&&m>-Math.PI/2||m>3*Math.PI/2){if(i<u)u=i}else if(Math.cos(m)!=0){if(i<o)o=i}m-=v}}c=0;d=0;for(r=u,f=0;f<l;++f,r+=(h.availableWidth-o-u)/l){s=E([r,h.availableWidth-r]);var m=t.startAngle*Math.PI/180;i=h.available;for(var g=0;g<e.labels.length;g++){var y=n.measureText(e.labels[g]).width+t.scaleFontSize;if(m<Math.PI/2&&m>-Math.PI/2||m>3*Math.PI/2){i=(h.availableWidth-r-y)/Math.abs(Math.cos(m))}else if(Math.cos(m!=0)){i=(r-y)/Math.abs(Math.cos(m))}if(i<s)s=i;if(Math.sin(m)*h.availableHeight/2>h.availableHeight/2-t.scaleFontSize*2){i=Math.sin(m)*h.availableHeight/2-1.5*t.scaleFontSize;if(i<s)s=i}m-=v}if(s>c){c=s;p=r}}s=c-t.scaleFontSize/2;a=x(a,5)}function N(){var n=Number.MIN_VALUE;var r=Number.MAX_VALUE;for(var i=0;i<e.datasets.length;i++){for(var s=0;s<e.datasets[i].data.length;s++){if(e.datasets[i].data[s]>n){n=e.datasets[i].data[s]}if(e.datasets[i].data[s]<r){r=e.datasets[i].data[s]}}}if(Math.abs(n-r)<1e-8){n=E([n*2,1]);r=0}if(!isNaN(t.graphMin))r=t.graphMin;if(!isNaN(t.graphMax))n=t.graphMax;var o=Math.floor(f/(a*.66));var u=Math.floor(f/a*.5);return{maxValue:n,minValue:r,maxSteps:o,minSteps:u}}var s,o,u,a,f,l,c,h,p,d;if(!dynamicFunction(e,t,n,"Radar"))return;while(t.startAngle<0){t.startAngle+=360}while(t.startAngle>360){t.startAngle-=360}t.logarithmic=false;var g=0;jsGraphAnnotate[n.canvas.id]=new Array;P(n,e,t,"Radar");if(!e.labels)e.labels=[];D(n,t);l=N();c=t.scaleShowLabels?t.scaleLabel:"";if(!t.scaleOverride){u=y(t,l.maxSteps,l.minSteps,l.maxValue,l.minValue,c);h=M(e,t,n,i,r,u.labels,true,false,false,true)}else{u={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,graphMax:t.scaleStartValue+t.scaleSteps*t.scaleStepWidth,labels:[]};w(t,c,u.labels,u.steps,t.scaleStartValue,u.graphMax,t.scaleStepWidth);h=M(e,t,n,i,r,u.labels,true,false,false,true)}T();d=h.topNotUsableSize+h.availableHeight/2;o=s/u.steps;m(t,S,b,n,h.clrx,h.clry,h.clrwidth,h.clrheight,p,d,p-s,d+s,e);};var a=function(e,t,n){function h(r){var i=-t.startAngle*(Math.PI/180)+2*Math.PI,o=0,c=1,h=1;var p=t.startAngle*(Math.PI/180)+2*Math.PI;while(i<0){i+=2*Math.PI}while(i>2*Math.PI){i-=2*Math.PI}while(p<0){p+=2*Math.PI}while(p>2*Math.PI){p-=2*Math.PI}if(t.animation){if(t.animateScale){c=r}if(t.animateRotate){h=r}}if(r>=1){totvalue=0;for(var d=0;d<e.length;d++)if(!(typeof e[d].value=="undefined"))totvalue+=1*e[d].value}for(var d=0;d<e.length;d++){if(!(typeof e[d].value=="undefined")){var v=h*1*e[d].value/s*Math.PI*2;if(v>=Math.PI*2)v=Math.PI*2-.001;n.beginPath();n.arc(u,a,c*f,i,i+v);n.lineTo(u,a);n.closePath();n.fillStyle=e[d].color;n.fill();i+=v;o+=1*e[d].value;if(t.segmentShowStroke){n.lineWidth=t.segmentStrokeWidth;n.strokeStyle=t.segmentStrokeColor;n.stroke()}if(r>=1){if(typeof e[d].title=="string")lgtxt=e[d].title.trim();else lgtxt="";jsGraphAnnotate[n.canvas.id][l++]=["ARC",u,a,0,f,i-v,i,lgtxt,1*e[d].value,o,totvalue,v,d];if(t.inGraphDataShow){if(t.inGraphDataAnglePosition==1)posAngle=p+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==2)posAngle=p-v/2+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==3)posAngle=p-v+t.inGraphDataPaddingAngle*(Math.PI/180);if(t.inGraphDataRadiusPosition==1)labelRadius=0+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==2)labelRadius=f/2+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==3)labelRadius=f+t.inGraphDataPaddingRadius;p-=v;n.save();if(t.inGraphDataAlign=="off-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2)n.textAlign="left";else n.textAlign="right"}else if(t.inGraphDataAlign=="to-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2)n.textAlign="right";else n.textAlign="left"}else n.textAlign=t.inGraphDataAlign;if(t.inGraphDataVAlign=="off-center"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="top";else n.textBaseline="bottom"}else if(t.inGraphDataVAlign=="to-center"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="bottom";else n.textBaseline="top"}else n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;var m=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,1*e[d].value,t.fmtV2),v3:fmtChartJS(t,o,t.fmtV3),v4:fmtChartJS(t,totvalue,t.fmtV4),v5:fmtChartJS(t,v,t.fmtV5),v6:fmtChartJS(t,100*e[d].value/totvalue,t.fmtV6),v7:fmtChartJS(t,u,t.fmtV7),v8:fmtChartJS(t,a,t.fmtV8),v9:fmtChartJS(t,0,t.fmtV9),v10:fmtChartJS(t,f,t.fmtV10),v11:fmtChartJS(t,i-v,t.fmtV11),v12:fmtChartJS(t,i,t.fmtV12),v13:fmtChartJS(t,d,t.fmtV13)});n.translate(u+labelRadius*Math.cos(posAngle),a-labelRadius*Math.sin(posAngle));if(t.inGraphDataRotate=="inRadiusAxis")n.rotate(2*Math.PI-posAngle);else if(t.inGraphDataRotate=="inRadiusAxisRotateLabels"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2)n.rotate(3*Math.PI-posAngle);else n.rotate(2*Math.PI-posAngle)}else n.rotate(t.inGraphDataRotate*(Math.PI/180));n.fillText(m,0,0);n.restore()}}}}}function p(){var r;var i=-t.startAngle*(Math.PI/180)+2*Math.PI,l=0;while(i<0){i+=2*Math.PI}while(i>2*Math.PI){i-=2*Math.PI}u=o.leftNotUsableSize+o.availableWidth/2;a=o.topNotUsableSize+o.availableHeight/2;f=S([o.availableHeight/2,o.availableWidth/2])-5;n.font=t.pointLabelFontStyle+" "+t.pointLabelFontSize+"px "+t.pointLabelFontFamily;if(t.inGraphDataShow&&t.inGraphDataRadiusPosition==3&&t.inGraphDataAlign=="off-center"&&t.inGraphDataRotate==0){f=S([o.availableHeight/2,o.availableWidth/2])-t.inGraphDataFontSize-t.inGraphDataPaddingRadius-5;var c=t.startAngle*(Math.PI/180)+2*Math.PI;while(c<0){c+=2*Math.PI}while(c>2*Math.PI){c-=2*Math.PI}var h=0;for(var p=0;p<e.length;p++)if(!(typeof e[p].value=="undefined"))h+=1*e[p].value;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;var l=0;var d;for(var p=0;p<e.length;p++){if(!(typeof e[p].value=="undefined")){l+=1*e[p].value;var v=1*e[p].value/s*Math.PI*2;i+=v;if(t.inGraphDataAnglePosition==1)d=c+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==2)d=c-v/2+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==3)d=c-v+t.inGraphDataPaddingAngle*(Math.PI/180);c-=v;if(typeof e[p].title=="string")r=e[p].title.trim();else r="";var m=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,r,t.fmtV1),v2:fmtChartJS(t,1*e[p].value,t.fmtV2),v3:fmtChartJS(t,l,t.fmtV3),v4:fmtChartJS(t,h,t.fmtV4),v5:fmtChartJS(t,v,t.fmtV5),v6:fmtChartJS(t,100*e[p].value/h,t.fmtV6),v7:fmtChartJS(t,u,t.fmtV7),v8:fmtChartJS(t,a,t.fmtV8),v9:fmtChartJS(t,0,t.fmtV9),v10:fmtChartJS(t,f,t.fmtV10),v11:fmtChartJS(t,i-v,t.fmtV11),v12:fmtChartJS(t,i,t.fmtV12),v13:fmtChartJS(t,p,t.fmtV13)});var g=n.measureText(m).width;var y=Math.abs((o.availableWidth/2-g)/Math.cos(d))-t.inGraphDataPaddingRadius-5;if(y<f)f=y}}}f=f*t.radiusScale}var s=0;var o,u,a,f;if(!dynamicFunction(e,t,n,"Pie"))return;while(t.startAngle<0){t.startAngle+=360}while(t.startAngle>360){t.startAngle-=360}t.logarithmic=false;var l=0;jsGraphAnnotate[n.canvas.id]=new Array;P(n,e,t,"Pie");D(n,t);o=M(e,t,n,i,r,null,true,false,false,false);for(var c=0;c<e.length;c++){if(!(typeof e[c].value=="undefined"))s+=1*e[c].value}p();m(t,null,h,n,o.clrx,o.clry,o.clrwidth,o.clrheight,u,a,u-f,a+f,e);};var f=function(e,t,n){function p(r){var i=-t.startAngle*(Math.PI/180)+2*Math.PI,o=0,h=1,p=1;while(i<0){i+=2*Math.PI}while(i>2*Math.PI){i-=2*Math.PI}if(t.animation){if(t.animateScale){h=r}if(t.animateRotate){p=r}}if(r>=1){totvalue=0;for(var d=0;d<e.length;d++)if(!(typeof e[d].value=="undefined"))totvalue+=1*e[d].value}for(var d=0;d<e.length;d++){if(!(typeof e[d].value=="undefined")){var v=p*1*e[d].value/s*Math.PI*2;if(v>=Math.PI*2)v=Math.PI*2-.001;n.beginPath();n.arc(u,a,h*doughnutRadius,i,i+v,false);n.arc(u,a,h*c,i+v,i,true);n.closePath();n.fillStyle=e[d].color;n.fill();i+=v;o+=1*e[d].value;if(t.segmentShowStroke){n.lineWidth=t.segmentStrokeWidth;n.strokeStyle=t.segmentStrokeColor;n.stroke()}if(r>=1){if(typeof e[d].title=="string")lgtxt=e[d].title.trim();else lgtxt="";jsGraphAnnotate[n.canvas.id][l++]=["ARC",u,a,c,doughnutRadius,i-v,i,lgtxt,1*e[d].value,o,totvalue,v,d];if(t.inGraphDataShow){if(t.inGraphDataAnglePosition==1)posAngle=f+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==2)posAngle=f-v/2+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==3)posAngle=f-v+t.inGraphDataPaddingAngle*(Math.PI/180);if(t.inGraphDataRadiusPosition==1)labelRadius=c+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==2)labelRadius=c+(doughnutRadius-c)/2+t.inGraphDataPaddingRadius;else if(t.inGraphDataRadiusPosition==3)labelRadius=doughnutRadius+t.inGraphDataPaddingRadius;f-=v;n.save();if(t.inGraphDataAlign=="off-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2)n.textAlign="left";else n.textAlign="right"}else if(t.inGraphDataAlign=="to-center"){if(t.inGraphDataRotate=="inRadiusAxis"||(posAngle+2*Math.PI)%(2*Math.PI)>3*Math.PI/2||(posAngle+2*Math.PI)%(2*Math.PI)<Math.PI/2)n.textAlign="right";else n.textAlign="left"}else n.textAlign=t.inGraphDataAlign;if(t.inGraphDataVAlign=="off-center"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="top";else n.textBaseline="bottom"}else if(t.inGraphDataVAlign=="to-center"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI)n.textBaseline="bottom";else n.textBaseline="top"}else n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;var m=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,1*e[d].value,t.fmtV2),v3:fmtChartJS(t,o,t.fmtV3),v4:fmtChartJS(t,totvalue,t.fmtV4),v5:fmtChartJS(t,v,t.fmtV5),v6:fmtChartJS(t,100*e[d].value/totvalue,t.fmtV6),v7:fmtChartJS(t,u,t.fmtV7),v8:fmtChartJS(t,a,t.fmtV8),v9:fmtChartJS(t,c,t.fmtV9),v10:fmtChartJS(t,doughnutRadius,t.fmtV10),v11:fmtChartJS(t,i-v,t.fmtV11),v12:fmtChartJS(t,i,t.fmtV12),v13:fmtChartJS(t,d,t.fmtV13)});n.translate(u+labelRadius*Math.cos(posAngle),a-labelRadius*Math.sin(posAngle));if(t.inGraphDataRotate=="inRadiusAxis")n.rotate(2*Math.PI-posAngle);else if(t.inGraphDataRotate=="inRadiusAxisRotateLabels"){if((posAngle+2*Math.PI)%(2*Math.PI)>Math.PI/2&&(posAngle+2*Math.PI)%(2*Math.PI)<3*Math.PI/2)n.rotate(3*Math.PI-posAngle);else n.rotate(2*Math.PI-posAngle)}else n.rotate(t.inGraphDataRotate*(Math.PI/180));n.fillText(m,0,0);n.restore()}}}}}function d(){var r;var i=-t.startAngle*(Math.PI/180)+2*Math.PI,f=0;while(i<0){i+=2*Math.PI}while(i>2*Math.PI){i-=2*Math.PI}u=o.leftNotUsableSize+o.availableWidth/2;a=o.topNotUsableSize+o.availableHeight/2;doughnutRadius=S([o.availableHeight/2,o.availableWidth/2])-5;n.font=t.pointLabelFontStyle+" "+t.pointLabelFontSize+"px "+t.pointLabelFontFamily;if(t.inGraphDataShow&&t.inGraphDataRadiusPosition==3&&t.inGraphDataAlign=="off-center"&&t.inGraphDataRotate==0){doughnutRadius=S([o.availableHeight/2,o.availableWidth/2])-t.inGraphDataFontSize-t.inGraphDataPaddingRadius-5;var l=t.startAngle*(Math.PI/180)+2*Math.PI;while(l<0){l+=2*Math.PI}while(l>2*Math.PI){l-=2*Math.PI}var h=0;for(var p=0;p<e.length;p++)if(!(typeof e[p].value=="undefined"))h+=1*e[p].value;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;var d;var i=0;for(var p=0;p<e.length;p++){if(!(typeof e[p].value=="undefined")){f+=1*e[p].value;var v=1*e[p].value/s*Math.PI*2;i+=v;if(t.inGraphDataAnglePosition==1)d=l+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==2)d=l-v/2+t.inGraphDataPaddingAngle*(Math.PI/180);else if(t.inGraphDataAnglePosition==3)d=l-v+t.inGraphDataPaddingAngle*(Math.PI/180);l-=v;if(typeof e[p].title=="string")r=e[p].title.trim();else r="";var m=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,r,t.fmtV1),v2:fmtChartJS(t,1*e[p].value,t.fmtV2),v3:fmtChartJS(t,f,t.fmtV3),v4:fmtChartJS(t,h,t.fmtV4),v5:fmtChartJS(t,v,t.fmtV5),v6:fmtChartJS(t,100*e[p].value/h,t.fmtV6),v7:fmtChartJS(t,u,t.fmtV7),v8:fmtChartJS(t,a,t.fmtV8),v9:fmtChartJS(t,c,t.fmtV9),v10:fmtChartJS(t,doughnutRadius,t.fmtV10),v11:fmtChartJS(t,i-v,t.fmtV11),v12:fmtChartJS(t,i,t.fmtV12),v13:fmtChartJS(t,p,t.fmtV13)});var g=n.measureText(m).width;var y=Math.abs((o.availableWidth/2-g)/Math.cos(d))-t.inGraphDataPaddingRadius-5;if(y<doughnutRadius)doughnutRadius=y}}}doughnutRadius=doughnutRadius*t.radiusScale}var s=0;var o,u,a;if(!dynamicFunction(e,t,n,"Doughnut"))return;var f=t.startAngle*(Math.PI/180)+2*Math.PI;while(t.startAngle<0){t.startAngle+=360}while(t.startAngle>360){t.startAngle-=360}while(f<0){f+=2*Math.PI}while(f>2*Math.PI){f-=2*Math.PI}t.logarithmic=false;var l=0;jsGraphAnnotate[n.canvas.id]=new Array;P(n,e,t,"Doughnut");D(n,t);o=M(e,t,n,i,r,null,true,false,false,false);d();var c=doughnutRadius*(t.percentageInnerCutout/100);for(var h=0;h<e.length;h++){if(!(typeof e[h].value=="undefined"))s+=1*e[h].value}m(t,null,p,n,o.clrx,o.clry,o.clrwidth,o.clrheight,u,a,u-doughnutRadius,a+doughnutRadius,e);};var l=function(e,t,n){function L(r){function x(n,i){return S-r*v(t,e.datasets[n].data[i],u,o)}function T(e){return g+h*e}var i=new Array;var s=new Array;for(var a=0;a<e.datasets.length;a++){for(var f=0;f<e.datasets[a].data.length;f++){i[f]=0;s[f]=-999999999}}for(var a=0;a<e.datasets.length;a++){for(var f=0;f<e.datasets[a].data.length;f++){i[f]+=e.datasets[a].data[f];s[f]=E([s[f],e.datasets[a].data[f]])}}for(var a=0;a<e.datasets.length;a++){var l=-1;var c=-1;if(r>=1){if(typeof e.datasets[a].title=="string")lgtxt=e.datasets[a].title.trim();else lgtxt=""}n.strokeStyle=e.datasets[a].strokeColor;n.lineWidth=t.datasetStrokeWidth;n.beginPath();for(var f=0;f<e.datasets[a].data.length;f++){if(!(typeof e.datasets[a].data[f]=="undefined")){if(l==-1){n.moveTo(T(f),x(a,f));c=f}else{if(t.bezierCurve){n.bezierCurveTo(T(f-(f-l)/2),x(a,l),T(f-(f-l)/2),x(a,f),T(f),x(a,f))}else{n.lineTo(T(f),x(a,f))}}l=f;if(r>=1){if(a==0)divprev=e.datasets[a].data[f];else divprev=e.datasets[a].data[f]-e.datasets[a-1].data[f];if(a==e.datasets.length-1)divnext=e.datasets[a].data[f];else divnext=e.datasets[a].data[f]-e.datasets[a+1].data[f];if(typeof e.labels[f]=="string")lgtxt2=e.labels[f].trim();else lgtxt2="";jsGraphAnnotate[n.canvas.id][N++]=["POINT",T(f),x(a,f),lgtxt,lgtxt2,1*e.datasets[a].data[f],divprev,divnext,s[f],i[f],a,f];if(t.inGraphDataShow){n.save();n.textAlign=t.inGraphDataAlign;n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;var p=g+h*w,d=S-r*v(t,e.datasets[a].data[f],u,o),m=t.inGraphDataPaddingX,y=t.inGraphDataPaddingY;var b=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,lgtxt2,t.fmtV2),v3:fmtChartJS(t,1*e.datasets[a].data[f],t.fmtV3),v4:fmtChartJS(t,divprev,t.fmtV4),v5:fmtChartJS(t,divnext,t.fmtV5),v6:fmtChartJS(t,s[f],t.fmtV6),v7:fmtChartJS(t,i[f],t.fmtV7),v8:fmtChartJS(t,100*e.datasets[a].data[f]/i[f],t.fmtV8),v9:fmtChartJS(t,g,t.fmtV9),v10:fmtChartJS(t,S-v(t,e.datasets[a].data[f],u,o),t.fmtV10),v11:fmtChartJS(t,a,t.fmtV11),v12:fmtChartJS(t,f,t.fmtV12)});n.translate(T(f)+m,x(a,f)-y);n.rotate(t.inGraphDataRotate*(Math.PI/180));n.fillText(b,0,0);n.restore()}}}}n.stroke();if(t.datasetFill){n.lineTo(g+h*(e.datasets[a].data.length-1),S-k);n.lineTo(T(c),S-k);n.lineTo(T(c),x(a,c));n.closePath();n.fillStyle=e.datasets[a].fillColor;n.fill()}else{n.closePath()}if(t.pointDot){n.fillStyle=e.datasets[a].pointColor;n.strokeStyle=e.datasets[a].pointStrokeColor;n.lineWidth=t.pointDotStrokeWidth;for(var w=0;w<e.datasets[a].data.length;w++){if(!(typeof e.datasets[a].data[w]=="undefined")){n.beginPath();n.arc(g+h*w,S-r*v(t,e.datasets[a].data[w],u,o),t.pointDotRadius,0,Math.PI*2,true);n.fill();n.stroke()}}}}}function A(){n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(g-t.scaleTickSizeLeft,S);n.lineTo(g+T.availableWidth+t.scaleTickSizeRight,S);n.stroke();for(var r=0;r<e.labels.length;r++){n.beginPath();n.moveTo(g+r*h,S+t.scaleTickSizeBottom);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&r>0&&r%t.scaleXGridLinesStep==0){n.lineTo(g+r*h,S-T.availableHeight-t.scaleTickSizeTop)}else{n.lineTo(g+r*h,S)}n.stroke()}n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(g,S+t.scaleTickSizeBottom);n.lineTo(g,S-T.availableHeight-t.scaleTickSizeTop);n.stroke();for(var i=0;i<u.steps;i++){n.beginPath();n.moveTo(g-t.scaleTickSizeLeft,S-(i+1)*o);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&i%t.scaleYGridLinesStep==0){n.lineTo(g+T.availableWidth+t.scaleTickSizeRight,S-(i+1)*o)}else{n.lineTo(g,S-(i+1)*o)}n.stroke()}}function O(){n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;if(t.xAxisTop||t.xAxisBottom){n.textBaseline="top";if(T.rotateLabels>90){n.save();n.textAlign="left"}else if(T.rotateLabels>0){n.save();n.textAlign="right"}else{n.textAlign="center"}n.fillStyle=t.scaleFontColor;if(t.xAxisBottom){for(var r=0;r<e.labels.length;r++){n.save();if(T.rotateLabels>0){n.translate(g+r*h-t.scaleFontSize/2,T.xLabelPos);n.rotate(-(T.rotateLabels*(Math.PI/180)));n.fillText(fmtChartJS(t,e.labels[r],t.fmtXLabel),0,0)}else{n.fillText(fmtChartJS(t,e.labels[r],t.fmtXLabel),g+r*h,T.xLabelPos)}n.restore()}}}n.textAlign="right";n.textBaseline="middle";for(var i=t.showYAxisMin?-1:0;i<u.steps;i++){if(t.scaleShowLabels){if(t.yAxisLeft){n.textAlign="right";n.fillText(u.labels[i+1],g-(t.scaleTickSizeLeft+3),S-(i+1)*o)}if(t.yAxisRight){n.textAlign="left";n.fillText(u.labels[i+1],g+T.availableWidth+(t.scaleTickSizeRight+3),S-(i+1)*o)}}}}function _(){var n=Number.MIN_VALUE;var r=Number.MAX_VALUE;for(var i=0;i<e.datasets.length;i++){for(var s=0;s<e.datasets[i].data.length;s++){if(e.datasets[i].data[s]>n){n=e.datasets[i].data[s]}if(e.datasets[i].data[s]<r){r=e.datasets[i].data[s]}}}if(Math.abs(n-r)<1e-8){n=E([n*2,1]);r=0}if(!isNaN(t.graphMin))r=t.graphMin;if(!isNaN(t.graphMax))n=t.graphMax;var o=Math.floor(f/(a*.66));var u=Math.floor(f/a*.5);return{maxValue:n,minValue:r,maxSteps:o,minSteps:u}}var s,o,u,a,f,l,c,h,p,d,g,S,x=0,T;var N=0;if(!dynamicFunction(e,t,n,"Line"))return;jsGraphAnnotate[n.canvas.id]=new Array;P(n,e,t,"Line");D(n,t);l=_();if(t.logarithmic!==false){if(l.minValue<=0){t.logarithmic=false}}var C=b(Math.pow(10,b(l.maxValue)+1))-b(Math.pow(10,b(l.minValue)));if(t.logarithmic=="fuzzy"&&C<4||t.scaleOverride){t.logarithmic=false}c=t.scaleShowLabels?t.scaleLabel:"";if(!t.scaleOverride){u=y(t,l.maxSteps,l.minSteps,l.maxValue,l.minValue,c);T=M(e,t,n,i,r,u.labels,false,false,true,true)}else{u={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,graphMax:t.scaleStartValue+t.scaleSteps*t.scaleStepWidth,labels:[]};w(t,c,u.labels,u.steps,t.scaleStartValue,u.graphMax,t.scaleStepWidth);T=M(e,t,n,i,r,u.labels,false,false,true,true)}T.availableHeight=T.availableHeight-t.scaleTickSizeBottom-t.scaleTickSizeTop;T.availableWidth=T.availableWidth-t.scaleTickSizeLeft-t.scaleTickSizeRight;o=Math.floor(T.availableHeight/u.steps);h=Math.floor(T.availableWidth/(e.labels.length-1));if(h==0)h=T.availableWidth/(e.labels.length-1);T.clrwidth=T.clrwidth-(T.availableWidth-(e.labels.length-1)*h);T.availableWidth=(e.labels.length-1)*h;T.availableHeight=u.steps*o;g=T.leftNotUsableSize+t.scaleTickSizeLeft;S=T.topNotUsableSize+T.availableHeight+t.scaleTickSizeTop;O();var k=0;if(l.minValue<0){var k=v(t,0,u,o)}m(t,A,L,n,T.clrx,T.clry,T.clrwidth,T.clrheight,g+T.availableWidth/2,S-T.availableHeight/2,g,S,e);};var c=function(e,t,n){function k(r){n.lineWidth=t.barStrokeWidth;var i=new Array(e.datasets.length);var s=new Array(e.datasets.length);var a=new Array;var f=new Array;for(var l=0;l<e.datasets.length;l++){for(var c=0;c<e.datasets[l].data.length;c++){a[c]=0;f[c]=0}}for(var l=0;l<e.datasets.length;l++){for(var c=0;c<e.datasets[l].data.length;c++)if(!(typeof e.datasets[l].data[c]=="undefined")){f[c]+=1*e.datasets[l].data[c]}}for(var l=0;l<e.datasets.length;l++){n.fillStyle=e.datasets[l].fillColor;n.strokeStyle=e.datasets[l].strokeColor;if(r>=1){if(typeof e.datasets[l].title=="string")lgtxt=e.datasets[l].title.trim();else lgtxt=""}for(var c=0;c<e.datasets[l].data.length;c++){if(l==0){i[c]=0;s[c]=-1}if(!(typeof e.datasets[l].data[c]=="undefined")){var p=g+t.barValueSpacing+h*c;n.beginPath();n.moveTo(p,b-i[c]+1);n.lineTo(p,b-r*v(t,(s[c]>=0)*u.graphMin+1*e.datasets[l].data[c],u,o)+t.barStrokeWidth/2-i[c]);n.lineTo(p+w,b-r*v(t,(s[c]>=0)*u.graphMin+1*e.datasets[l].data[c],u,o)+t.barStrokeWidth/2-i[c]);n.lineTo(p+w,b-i[c]+1);if(t.barShowStroke)n.stroke();n.closePath();n.fill();a[c]+=1*e.datasets[l].data[c];if(r>=1){if(typeof e.labels[c]=="string")lgtxt2=e.labels[c].trim();else lgtxt2="";jsGraphAnnotate[n.canvas.id][T++]=["RECT",p,b-i[c]+1,p+w,b-v(t,(s[c]>=0)*u.graphMin+1*e.datasets[l].data[c],u,o)+t.barStrokeWidth/2-i[c],lgtxt,lgtxt2,1*e.datasets[l].data[c],a[c],f[c],l,c]}i[c]+=r*v(t,(s[c]>=0)*u.graphMin+1*e.datasets[l].data[c],u,o)-t.barStrokeWidth/2;if(s[c]==-1)s[c]=l}}}if(r>=1&&t.inGraphDataShow){var d=0,m=0;for(var l=0;l<e.datasets.length;l++){for(var c=0;c<e.datasets[l].data.length;c++){a[c]=0}}for(var l=0;l<e.datasets.length;l++){if(typeof e.datasets[l].title=="string")lgtxt=e.datasets[l].title.trim();else lgtxt="";for(var c=0;c<e.datasets[l].data.length;c++){if(l==0){i[c]=0;s[c]=-1}if(!(typeof e.datasets[l].data[c]=="undefined")){n.save();n.textAlign=t.inGraphDataAlign;n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;if(typeof e.labels[c]=="string")lgtxt2=e.labels[c].trim();else lgtxt2="";var y=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,lgtxt2,t.fmtV2),v3:fmtChartJS(t,1*e.datasets[l].data[c],t.fmtV3),v4:fmtChartJS(t,a[c],t.fmtV4),v5:fmtChartJS(t,f[c],t.fmtV5),v6:fmtChartJS(t,100*e.datasets[l].data[c]/f[c],t.fmtV6),v7:fmtChartJS(t,p,t.fmtV7),v8:fmtChartJS(t,b,t.fmtV8),v9:fmtChartJS(t,p+w,t.fmtV9),v10:fmtChartJS(t,b-v(t,e.datasets[l].data[c],u,o)+t.barStrokeWidth/2,t.fmtV10),v11:fmtChartJS(t,l,t.fmtV11),v12:fmtChartJS(t,c,t.fmtV12)});var p=g+t.barValueSpacing+h*c;n.beginPath();n.beginPath();d=0;m=0;if(t.inGraphDataXPosition==1){m=p+t.inGraphDataPaddingX}else if(t.inGraphDataXPosition==2){m=p+w/2+t.inGraphDataPaddingX}else if(t.inGraphDataXPosition==3){m=p+w+t.inGraphDataPaddingX}if(t.inGraphDataYPosition==1){d=b-i[c]-t.inGraphDataPaddingY}else if(t.inGraphDataYPosition==2){d=b-(v(t,(s[c]>=0)*u.graphMin+1*e.datasets[l].data[c],u,o)+t.barStrokeWidth/2)/2-i[c]-t.inGraphDataPaddingY}else if(t.inGraphDataYPosition==3){d=b-v(t,(s[c]>=0)*u.graphMin+1*e.datasets[l].data[c],u,o)+t.barStrokeWidth/2-i[c]-t.inGraphDataPaddingY}n.translate(m,d);n.rotate(t.inGraphDataRotate*(Math.PI/180));n.fillText(y,0,0);n.restore();a[c]+=1+e.datasets[l].data[c];i[c]+=r*v(t,(s[c]>=0)*u.graphMin+1*e.datasets[l].data[c],u,o)-t.barStrokeWidth/2;if(s[c]==-1)s[c]=l}}}}}function L(){n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(g-t.scaleTickSizeLeft,b);n.lineTo(g+x.availableWidth+t.scaleTickSizeRight,b);n.stroke();for(var r=0;r<e.labels.length;r++){n.beginPath();n.moveTo(g+r*h,b+t.scaleTickSizeBottom);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&r>0&&r%t.scaleXGridLinesStep==0){n.lineTo(g+r*h,b-x.availableHeight-t.scaleTickSizeTop)}else{n.lineTo(g+r*h,b)}n.stroke()}n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(g,b+t.scaleTickSizeBottom);n.lineTo(g,b-x.availableHeight-t.scaleTickSizeTop);n.stroke();for(var i=t.showYAxisMin?-1:0;i<u.steps;i++){n.beginPath();n.moveTo(g-t.scaleTickSizeLeft,b-(i+1)*o);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&i%t.scaleYGridLinesStep==0){n.lineTo(g+x.availableWidth+t.scaleTickSizeRight,b-(i+1)*o)}else{n.lineTo(g,b-(i+1)*o)}n.stroke()}}function O(){n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;if(t.xAxisTop||t.xAxisBottom){n.textBaseline="top";if(x.rotateLabels>90){n.save();n.textAlign="left"}else if(x.rotateLabels>0){n.save();n.textAlign="right"}else{n.textAlign="center"}n.fillStyle=t.scaleFontColor;if(t.xAxisBottom){for(var r=0;r<e.labels.length;r++){n.save();if(x.rotateLabels>0){n.translate(g+r*h+w/2-t.scaleFontSize/2,x.xLabelPos);n.rotate(-(x.rotateLabels*(Math.PI/180)));n.fillText(fmtChartJS(t,e.labels[r],t.fmtXLabel),0,0)}else{n.fillText(fmtChartJS(t,e.labels[r],t.fmtXLabel),g+r*h+w/2,x.xLabelPos)}n.restore()}}}n.textAlign="right";n.textBaseline="middle";for(var i=t.showYAxisMin?-1:0;i<u.steps;i++){if(t.scaleShowLabels){if(t.yAxisLeft){n.textAlign="right";n.fillText(u.labels[i+1],g-(t.scaleTickSizeLeft+3),b-(i+1)*o)}if(t.yAxisRight){n.textAlign="left";n.fillText(u.labels[i+1],g+x.availableWidth+(t.scaleTickSizeRight+3),b-(i+1)*o)}}}}function _(){var n=Number.MIN_VALUE;var r=Number.MAX_VALUE;var i=new Array(e.datasets.length);var s=new Array(e.datasets.length);for(var o=0;o<e.datasets.length;o++){for(var u=0;u<e.datasets[o].data.length;u++){var l=o;var c=0;if(!(typeof e.datasets[0].data[u]=="undefined")){c+=1*e.datasets[0].data[u];if(c>n){n=c}if(c<r){r=c}}while(l>0){if(!(typeof e.datasets[l].data[u]=="undefined")){c+=1*e.datasets[l].data[u];if(c>n){n=c}if(c<r){r=c}}l--}}}if(!isNaN(t.graphMin))r=t.graphMin;if(!isNaN(t.graphMax))n=t.graphMax;if(Math.abs(n-r)<1e-8){n=E([n*2,1]);r=0}var h=Math.floor(f/(a*.66));var p=Math.floor(f/a*.5);return{maxValue:n,minValue:r,maxSteps:h,minSteps:p}}var s,o,u,a,f,l,c,h,p,d,g,b,w,S=0,x;if(!dynamicFunction(e,t,n,"StackedBar"))return;t.logarithmic=false;var T=0;jsGraphAnnotate[n.canvas.id]=new Array;P(n,e,t,"StackedBar");D(n,t);l=_();c=t.scaleShowLabels?t.scaleLabel:"";if(!t.scaleOverride){u=y(t,l.maxSteps,l.minSteps,l.maxValue,l.minValue,c);x=M(e,t,n,i,r,u.labels,true,false,true,true)}else{u={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,labels:[]};for(var N=0;N<u.steps;N++){if(c){u.labels.push(A(c,{value:fmtChartJS(t,1*(t.scaleStartValue+t.scaleStepWidth*(N+1)).toFixed(C(t.scaleStepWidth)),t.fmtYLabel)}))}}x=M(e,t,n,i,r,u.labels,true,false,true,true)}x.availableHeight=x.availableHeight-t.scaleTickSizeBottom-t.scaleTickSizeTop;x.availableWidth=x.availableWidth-t.scaleTickSizeLeft-t.scaleTickSizeRight;o=Math.floor(x.availableHeight/u.steps);h=Math.floor(x.availableWidth/e.labels.length);if(h==0)h=x.availableWidth/(e.labels.length-1);x.clrwidth=x.clrwidth-(x.availableWidth-e.labels.length*h);x.availableWidth=e.labels.length*h;x.availableHeight=u.steps*o;g=x.leftNotUsableSize+t.scaleTickSizeLeft;b=x.topNotUsableSize+x.availableHeight+t.scaleTickSizeTop;w=h-t.scaleGridLineWidth*2-t.barValueSpacing*2-(t.barDatasetSpacing*e.datasets.length-1)-t.barStrokeWidth/2-1;O();m(t,L,k,n,x.clrx,x.clry,x.clrwidth,x.clrheight,g+x.availableWidth/2,b-x.availableHeight/2,g,b,e);};var h=function(e,t,n){function k(e,t,n){var r=t.steps*t.stepValue;var i=e-t.graphMin;var s=N(i/r,1,0);return n*t.steps*s}function L(r){n.lineWidth=t.barStrokeWidth;var i=new Array(e.datasets.length);var s=new Array(e.datasets.length);var a=new Array;var f=new Array;for(var l=0;l<e.datasets.length;l++){for(var c=0;c<e.datasets[l].data.length;c++){a[c]=0;f[c]=0}}for(var l=0;l<e.datasets.length;l++){for(var c=0;c<e.datasets[l].data.length;c++)if(!(typeof e.datasets[l].data[c]=="undefined")){f[c]+=1*e.datasets[l].data[c]}}for(var l=0;l<e.datasets.length;l++){n.fillStyle=e.datasets[l].fillColor;n.strokeStyle=e.datasets[l].strokeColor;if(r>=1){if(typeof e.datasets[l].title=="string")lgtxt=e.datasets[l].title.trim();else lgtxt=""}for(var c=0;c<e.datasets[l].data.length;c++){if(l==0){i[c]=0;s[c]=-1}if(!(typeof e.datasets[l].data[c]=="undefined")){var p=g+t.barValueSpacing-o*(c+1);n.beginPath();n.moveTo(v+i[c]+1,p);n.lineTo(v+i[c]+r*k((s[c]>=0)*u.graphMin+1*e.datasets[l].data[c],u,h)+t.barStrokeWidth/2,p);n.lineTo(v+i[c]+r*k((s[c]>=0)*u.graphMin+1*e.datasets[l].data[c],u,h)+t.barStrokeWidth/2,p+b);n.lineTo(v+i[c]+1,p+b);n.lineTo(v+i[c]+1,p);if(t.barShowStroke)n.stroke();n.closePath();n.fill();a[c]+=1*e.datasets[l].data[c];if(r>=1){if(typeof e.labels[c]=="string")lgtxt2=e.labels[c].trim();else lgtxt2="";jsGraphAnnotate[n.canvas.id][x++]=["RECT",v+i[c]+1,p+b,v+i[c]+k((s[c]>=0)*u.graphMin+1*e.datasets[l].data[c],u,h)+t.barStrokeWidth/2,p,lgtxt,lgtxt2,1*e.datasets[l].data[c],a[c],f[c],l,c]}i[c]+=r*k((s[c]>=0)*u.graphMin+1*e.datasets[l].data[c],u,h)+t.barStrokeWidth/2;if(s[c]==-1)s[c]=l}}}if(r>=1&&t.inGraphDataShow){var d=0,m=0;for(var l=0;l<e.datasets.length;l++){for(var c=0;c<e.datasets[l].data.length;c++){a[c]=0}}for(var l=0;l<e.datasets.length;l++){if(typeof e.datasets[l].title=="string")lgtxt=e.datasets[l].title.trim();else lgtxt="";for(var c=0;c<e.datasets[l].data.length;c++){if(l==0){i[c]=0;s[c]=-1}if(!(typeof e.datasets[l].data[c]=="undefined")){n.save();n.textAlign=t.inGraphDataAlign;n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;if(typeof e.labels[c]=="string")lgtxt2=e.labels[c].trim();else lgtxt2="";var p=g+t.barValueSpacing-o*(c+1);var y=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,lgtxt2,t.fmtV2),v3:fmtChartJS(t,1*e.datasets[l].data[c],t.fmtV3),v4:fmtChartJS(t,a[c],t.fmtV4),v5:fmtChartJS(t,f[c],t.fmtV5),v6:fmtChartJS(t,100*e.datasets[l].data[c]/f[c],t.fmtV6),v7:fmtChartJS(t,v,t.fmtV7),v8:fmtChartJS(t,p+b,t.fmtV8),v9:fmtChartJS(t,v+k(e.datasets[l].data[c],u,h)+t.barStrokeWidth/2,t.fmtV9),v10:fmtChartJS(t,p,t.fmtV10),v11:fmtChartJS(t,l,t.fmtV11),v12:fmtChartJS(t,c,t.fmtV12)});n.beginPath();d=0;m=0;if(t.inGraphDataXPosition==1){m=v+i[c]+1+t.inGraphDataPaddingX}else if(t.inGraphDataXPosition==2){m=v+i[c]+(k((s[c]>=0)*u.graphMin+1*e.datasets[l].data[c],u,h)+t.barStrokeWidth/2)/2+t.inGraphDataPaddingX}else if(t.inGraphDataXPosition==3){m=v+i[c]+k((s[c]>=0)*u.graphMin+1*e.datasets[l].data[c],u,h)+t.barStrokeWidth/2+t.inGraphDataPaddingX}if(t.inGraphDataYPosition==1){d=p+b-t.inGraphDataPaddingY}else if(t.inGraphDataYPosition==2){d=p+b/2-t.inGraphDataPaddingY}else if(t.inGraphDataYPosition==3){d=p-t.inGraphDataPaddingY}n.translate(m,d);n.rotate(t.inGraphDataRotate*(Math.PI/180));n.fillText(y,0,0);n.restore();a[c]+=e.datasets[l].data[c];i[c]+=r*k((s[c]>=0)*u.graphMin+1*e.datasets[l].data[c],u,h)+t.barStrokeWidth/2;if(s[c]==-1)s[c]=l}}}}}function O(){n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(v-t.scaleTickSizeLeft,g);n.lineTo(v+S.availableWidth,g);n.stroke();for(var r=t.showYAxisMin?-1:0;r<u.steps;r++){if(r>=0){n.beginPath();n.moveTo(v+r*h,g+t.scaleTickSizeBottom);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&r>0&&r%t.scaleXGridLinesStep==0){n.lineTo(v+r*h,g-S.availableHeight-t.scaleTickSizeTop)}else{n.lineTo(v+r*h,g)}n.stroke()}}n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(v,g+t.scaleTickSizeBottom);n.lineTo(v,g-S.availableHeight-t.scaleTickSizeTop);n.stroke();for(var i=0;i<e.labels.length;i++){n.beginPath();n.moveTo(v-t.scaleTickSizeLeft,g-(i+1)*o);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&i%t.scaleYGridLinesStep==0){n.lineTo(v+S.availableWidth,g-(i+1)*o)}else{n.lineTo(v,g-(i+1)*o)}n.stroke()}}function _(){n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;if(t.xAxisTop||t.xAxisBottom){n.textBaseline="top";if(S.rotateLabels>90){n.save();n.textAlign="left"}else if(S.rotateLabels>0){n.save();n.textAlign="right"}else{n.textAlign="center"}n.fillStyle=t.scaleFontColor;if(t.xAxisBottom){for(var r=t.showYAxisMin?-1:0;r<u.steps;r++){n.save();if(S.rotateLabels>0){n.translate(v+(r+1)*h-t.scaleFontSize/2,S.xLabelPos);n.rotate(-(S.rotateLabels*(Math.PI/180)));n.fillText(u.labels[r+1],0,0)}else{n.fillText(u.labels[r+1],v+(r+1)*h,S.xLabelPos)}n.restore()}}}n.textAlign="right";n.textBaseline="middle";for(var i=0;i<e.labels.length;i++){if(t.scaleShowLabels){if(t.yAxisLeft){n.textAlign="right";n.fillText(fmtChartJS(t,e.labels[i],t.fmtXLabel),v-(t.scaleTickSizeLeft+3),g-(i+1)*o+b/2)}if(t.yAxisRight){n.textAlign="left";n.fillText(fmtChartJS(t,e.labels[i],t.fmtXLabel),v+S.availableWidth+(t.scaleTickSizeRight+3),g-(i+1)*o+b/2)}}}}function H(){var n=Number.MIN_VALUE;var r=Number.MAX_VALUE;var i=new Array(e.datasets.length);var s=new Array(e.datasets.length);for(var o=0;o<e.datasets.length;o++){for(var u=0;u<e.datasets[o].data.length;u++){var l=o;var c=0;if(!(typeof e.datasets[0].data[u]=="undefined")){c+=1*e.datasets[0].data[u];if(c>n){n=c}if(c<r){r=c}}while(l>0){if(!(typeof e.datasets[l].data[u]=="undefined")){c+=1*e.datasets[l].data[u];if(c>n){n=c}if(c<r){r=c}}l--}}}if(!isNaN(t.graphMin))r=t.graphMin;if(!isNaN(t.graphMax))n=t.graphMax;if(Math.abs(n-r)<1e-8){n=E([n*2,1]);r=0}var h=Math.floor(f/(a*.66));var p=Math.floor(f/a*.5);return{maxValue:n,minValue:r,maxSteps:h,minSteps:p}}var s,o,u,a,f,l,c,h,p,d,v,g,b,w=0,S;if(!dynamicFunction(e,t,n,"HorizontalStackedBar"))return;t.logarithmic=false;var x=0;jsGraphAnnotate[n.canvas.id]=new Array;P(n,e,t,"HorizontalStackedBar");D(n,t);l=H();c=t.scaleShowLabels?t.scaleLabel:"";if(!t.scaleOverride){u=y(t,l.maxSteps,l.minSteps,l.maxValue,l.minValue,c);S=M(e,t,n,i,r,u.labels,true,true,true,true)}else{u={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,labels:[]};for(var T=0;T<u.steps;T++){if(c){u.labels.push(A(c,{value:fmtChartJS(t,1*(t.scaleStartValue+t.scaleStepWidth*(T+1)).toFixed(C(t.scaleStepWidth)),t.fmtYLabel)}))}}S=M(e,t,n,i,r,u.labels,true,true,true,true)}S.availableHeight=S.availableHeight-t.scaleTickSizeBottom-t.scaleTickSizeTop;S.availableWidth=S.availableWidth-t.scaleTickSizeLeft-t.scaleTickSizeRight;o=Math.floor(S.availableHeight/e.labels.length);h=Math.floor(S.availableWidth/u.steps);if(h==0)h=S.availableWidth/(e.labels.length-1);S.clrwidth=S.clrwidth-(S.availableWidth-u.steps*h);S.availableWidth=u.steps*h;S.availableHeight=e.labels.length*o;v=S.leftNotUsableSize+t.scaleTickSizeLeft;g=S.topNotUsableSize+S.availableHeight+t.scaleTickSizeTop;b=o-t.scaleGridLineWidth*2-t.barValueSpacing*2-(t.barDatasetSpacing*e.datasets.length-1)-t.barStrokeWidth/2-1;_();m(t,O,L,n,S.clrx,S.clry,S.clrwidth,S.clrheight,v+S.availableWidth/2,g-S.availableHeight/2,v,g,e);};var p=function(e,t,n){function A(r){var i,s,a;var f=new Array;var l=new Array;for(var c=0;c<e.datasets.length;c++){for(var p=0;p<e.datasets[c].data.length;p++){f[p]=0;l[p]=0}}for(var c=0;c<e.datasets.length;c++){for(var p=0;p<e.datasets[c].data.length;p++)if(!(typeof e.datasets[c].data[p]=="undefined"))l[p]+=1*e.datasets[c].data[p]}n.lineWidth=t.barStrokeWidth;for(var c=0;c<e.datasets.length;c++){n.fillStyle=e.datasets[c].fillColor;n.strokeStyle=e.datasets[c].strokeColor;if(r>=1){if(typeof e.datasets[c].title=="string")lgtxt=e.datasets[c].title.trim();else lgtxt=""}for(var p=0;p<e.datasets[c].data.length;p++){if(!(typeof e.datasets[c].data[p]=="undefined")){var d=g+t.barValueSpacing+h*p+x*c+t.barDatasetSpacing*c+t.barStrokeWidth*c;n.beginPath();n.moveTo(d,S-L);n.lineTo(d,S-r*v(t,1*e.datasets[c].data[p],u,o)+t.barStrokeWidth/2);n.lineTo(d+x,S-r*v(t,1*e.datasets[c].data[p],u,o)+t.barStrokeWidth/2);n.lineTo(d+x,S-L);if(t.barShowStroke){n.stroke()}n.closePath();n.fill();f[p]+=1*e.datasets[c].data[p];if(r>=1){if(typeof e.labels[p]=="string")lgtxt2=e.labels[p].trim();else lgtxt2="";i=S-L;s=S-v(t,1*e.datasets[c].data[p],u,o)+t.barStrokeWidth/2;if(i<s){a=i;i=s;s=a}jsGraphAnnotate[n.canvas.id][C++]=["RECT",d,i,d+x,s,lgtxt,lgtxt2,1*e.datasets[c].data[p],f[p],l[p],c,p]}}}}if(r>=1&&t.inGraphDataShow){for(var c=0;c<e.datasets.length;c++){for(var p=0;p<e.datasets[c].data.length;p++){f[p]=0}}for(var c=0;c<e.datasets.length;c++){if(typeof e.datasets[c].title=="string")lgtxt=e.datasets[c].title.trim();else lgtxt="";for(var p=0;p<e.datasets[c].data.length;p++){if(!(typeof e.datasets[c].data[p]=="undefined")){if(typeof e.labels[p]=="string")lgtxt2=e.labels[p].trim();n.save();n.textAlign=t.inGraphDataAlign;n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;var d=g+t.barValueSpacing+h*p+x*c+t.barDatasetSpacing*c+t.barStrokeWidth*c;i=S-L;s=S-v(t,1*e.datasets[c].data[p],u,o)+t.barStrokeWidth/2;n.beginPath();var m=0,y=0;if(t.inGraphDataXPosition==1){y=d+t.inGraphDataPaddingX}else if(t.inGraphDataXPosition==2){y=d+x/2+t.inGraphDataPaddingX}else if(t.inGraphDataXPosition==3){y=d+x+t.inGraphDataPaddingX}if(t.inGraphDataYPosition==1){m=S-L-t.inGraphDataPaddingY}else if(t.inGraphDataYPosition==2){m=S-(v(t,1*e.datasets[c].data[p],u,o)+t.barStrokeWidth/2)/2-t.inGraphDataPaddingY}else if(t.inGraphDataYPosition==3){m=S-v(t,1*e.datasets[c].data[p],u,o)+t.barStrokeWidth/2-t.inGraphDataPaddingY}n.translate(y,m);var b=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,lgtxt2,t.fmtV2),v3:fmtChartJS(t,1*e.datasets[c].data[p],t.fmtV3),v4:fmtChartJS(t,f[p],t.fmtV4),v5:fmtChartJS(t,l[p],t.fmtV5),v6:fmtChartJS(t,100*e.datasets[c].data[p]/l[p],t.fmtV6),v7:fmtChartJS(t,d,t.fmtV7),v8:fmtChartJS(t,i,t.fmtV8),v9:fmtChartJS(t,d+x,t.fmtV9),v10:fmtChartJS(t,s,t.fmtV10),v11:fmtChartJS(t,c,t.fmtV11),v12:fmtChartJS(t,p,t.fmtV12)});n.rotate(t.inGraphDataRotate*(Math.PI/180));n.fillText(b,0,0);n.restore();f[p]+=1*e.datasets[c].data[p]}}}}}function O(){n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(g-t.scaleTickSizeLeft,S);n.lineTo(g+N.availableWidth+t.scaleTickSizeRight,S);n.stroke();for(var r=0;r<e.labels.length;r++){n.beginPath();n.moveTo(g+r*h,S+t.scaleTickSizeBottom);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&r>0&&r%t.scaleXGridLinesStep==0){n.lineTo(g+r*h,S-N.availableHeight-t.scaleTickSizeTop)}else{n.lineTo(g+r*h,S)}n.stroke()}n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(g,S+t.scaleTickSizeBottom);n.lineTo(g,S-N.availableHeight-t.scaleTickSizeTop);n.stroke();for(var i=0;i<u.steps;i++){n.beginPath();n.moveTo(g-t.scaleTickSizeLeft,S-(i+1)*o);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&i%t.scaleYGridLinesStep==0){n.lineTo(g+N.availableWidth+t.scaleTickSizeRight,S-(i+1)*o)}else{n.lineTo(g,S-(i+1)*o)}n.stroke()}}function _(){n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;if(t.xAxisTop||t.xAxisBottom){n.textBaseline="top";if(N.rotateLabels>90){n.save();n.textAlign="left"}else if(N.rotateLabels>0){n.save();n.textAlign="right"}else{n.textAlign="center"}n.fillStyle=t.scaleFontColor;if(t.xAxisBottom){for(var r=0;r<e.labels.length;r++){n.save();if(N.rotateLabels>0){n.translate(g+r*h+h/2-t.scaleFontSize/2,N.xLabelPos);n.rotate(-(N.rotateLabels*(Math.PI/180)));n.fillText(fmtChartJS(t,e.labels[r],t.fmtXLabel),0,0)}else{n.fillText(fmtChartJS(t,e.labels[r],t.fmtXLabel),g+r*h+h/2,N.xLabelPos)}n.restore()}}}n.textAlign="right";n.textBaseline="middle";for(var i=t.showYAxisMin?-1:0;i<u.steps;i++){if(t.scaleShowLabels){if(t.yAxisLeft){n.textAlign="right";n.fillText(u.labels[i+1],g-(t.scaleTickSizeLeft+3),S-(i+1)*o)}if(t.yAxisRight){n.textAlign="left";n.fillText(u.labels[i+1],g+N.availableWidth+(t.scaleTickSizeRight+3),S-(i+1)*o)}}}}function H(){var n=Number.MIN_VALUE;var r=Number.MAX_VALUE;for(var i=0;i<e.datasets.length;i++){for(var s=0;s<e.datasets[i].data.length;s++){if(e.datasets[i].data[s]>n){n=e.datasets[i].data[s]}if(e.datasets[i].data[s]<r){r=e.datasets[i].data[s]}}}if(Math.abs(n-r)<1e-8){n=E([n*2,1]);r=0}if(!isNaN(t.graphMin))r=t.graphMin;if(!isNaN(t.graphMax))n=t.graphMax;var o=Math.floor(f/(a*.66));var u=Math.floor(f/a*.5);return{maxValue:n,minValue:r,maxSteps:o,minSteps:u}}var s,o,u,a,f,l,c,h,p,d,g,S,x,T=0,N;var C=0;if(!dynamicFunction(e,t,n,"Bar"))return;jsGraphAnnotate[n.canvas.id]=new Array;P(n,e,t,"Bar");D(n,t);l=H();if(t.logarithmic!==false){if(l.minValue<=0){t.logarithmic=false}}var k=b(Math.pow(10,b(l.maxValue)+1))-b(Math.pow(10,b(l.minValue)));if(t.logarithmic=="fuzzy"&&k<4||t.scaleOverride){t.logarithmic=false}c=t.scaleShowLabels?t.scaleLabel:"";if(!t.scaleOverride){u=y(t,l.maxSteps,l.minSteps,l.maxValue,l.minValue,c);N=M(e,t,n,i,r,u.labels,true,false,true,true)}else{u={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,graphMax:t.scaleStartValue+t.scaleSteps*t.scaleStepWidth,labels:[]};w(t,c,u.labels,u.steps,t.scaleStartValue,u.graphMax,t.scaleStepWidth);N=M(e,t,n,i,r,u.labels,true,false,true,true)}N.availableHeight=N.availableHeight-t.scaleTickSizeBottom-t.scaleTickSizeTop;N.availableWidth=N.availableWidth-t.scaleTickSizeLeft-t.scaleTickSizeRight;o=Math.floor(N.availableHeight/u.steps);h=Math.floor(N.availableWidth/e.labels.length);if(h==0)h=N.availableWidth/(e.labels.length-1);N.clrwidth=N.clrwidth-(N.availableWidth-e.labels.length*h);N.availableWidth=e.labels.length*h;N.availableHeight=u.steps*o;g=N.leftNotUsableSize+t.scaleTickSizeLeft;S=N.topNotUsableSize+N.availableHeight+t.scaleTickSizeTop;x=(h-t.scaleGridLineWidth*2-t.barValueSpacing*2-(t.barDatasetSpacing*e.datasets.length-1)-(t.barStrokeWidth/2*e.datasets.length-1))/e.datasets.length;var L=0;if(l.minValue<0){var L=v(t,0,u,o)}_();m(t,O,A,n,N.clrx,N.clry,N.clrwidth,N.clrheight,g+N.availableWidth/2,S-N.availableHeight/2,g,S,e);};var d=function(e,t,n){function k(r){var i=new Array;var s=new Array;for(var a=0;a<e.datasets.length;a++){for(var f=0;f<e.datasets[a].data.length;f++){i[f]=0;s[f]=0}}for(var a=0;a<e.datasets.length;a++){for(var f=0;f<e.datasets[a].data.length;f++)if(!(typeof e.datasets[a].data[f]=="undefined"))s[f]+=1*e.datasets[a].data[f]}n.lineWidth=t.barStrokeWidth;for(var a=0;a<e.datasets.length;a++){n.fillStyle=e.datasets[a].fillColor;n.strokeStyle=e.datasets[a].strokeColor;if(r>=1){if(typeof e.datasets[a].title=="string")lgtxt=e.datasets[a].title.trim();else lgtxt=""}for(var f=0;f<e.datasets[a].data.length;f++){if(!(typeof e.datasets[a].data[f]=="undefined")){var l=b+t.barValueSpacing-o*(f+1)+S*a+t.barDatasetSpacing*a+t.barStrokeWidth*a;n.beginPath();n.moveTo(g+C,l);n.lineTo(g+r*v(t,1*e.datasets[a].data[f],u,h)+t.barStrokeWidth/2,l);n.lineTo(g+r*v(t,1*e.datasets[a].data[f],u,h)+t.barStrokeWidth/2,l+S);n.lineTo(g+C,l+S);if(t.barShowStroke){n.stroke()}n.closePath();n.fill();i[f]+=1*e.datasets[a].data[f];if(r>=1){if(typeof e.labels[f]=="string")lgtxt2=e.labels[f].trim();else lgtxt2="";t1=g+C;t2=g+v(t,1*e.datasets[a].data[f],u,h)+t.barStrokeWidth/2;if(t1>t2){t3=t1;t1=t2;t2=t3}jsGraphAnnotate[n.canvas.id][N++]=["RECT",t1,l+S,t2,l,lgtxt,lgtxt2,1*e.datasets[a].data[f],i[f],s[f],a,f]}}}}if(r>=1&&t.inGraphDataShow){for(var a=0;a<e.datasets.length;a++){for(var f=0;f<e.datasets[a].data.length;f++){i[f]=0}}for(var a=0;a<e.datasets.length;a++){if(typeof e.datasets[a].title=="string")lgtxt=e.datasets[a].title.trim();else lgtxt="";for(var f=0;f<e.datasets[a].data.length;f++){if(!(typeof e.datasets[a].data[f]=="undefined")){if(typeof e.labels[f]=="string")lgtxt2=e.labels[f].trim();n.save();n.textAlign=t.inGraphDataAlign;n.textBaseline=t.inGraphDataVAlign;n.font=t.inGraphDataFontStyle+" "+t.inGraphDataFontSize+"px "+t.inGraphDataFontFamily;n.fillStyle=t.inGraphDataFontColor;var l=b+t.barValueSpacing-o*(f+1)+S*a+t.barDatasetSpacing*a+t.barStrokeWidth*a;t1=g+C;t2=g+v(t,1*e.datasets[a].data[f],u,h)+t.barStrokeWidth/2;if(t1>t2){t3=t1;t1=t2;t2=t3}n.beginPath();var c=0,p=0;if(t.inGraphDataYPosition==1){c=l-t.inGraphDataPaddingY+S}else if(t.inGraphDataYPosition==2){c=l+S/2-t.inGraphDataPaddingY}else if(t.inGraphDataYPosition==3){c=l-t.inGraphDataPaddingY}if(t.inGraphDataXPosition==1){p=g+C+t.inGraphDataPaddingX}else if(t.inGraphDataXPosition==2){p=g+(v(t,1*e.datasets[a].data[f],u,h)+t.barStrokeWidth/2)/2+t.inGraphDataPaddingX}else if(t.inGraphDataXPosition==3){p=g+v(t,1*e.datasets[a].data[f],u,h)+t.barStrokeWidth/2+t.inGraphDataPaddingX}n.translate(p,c);var d=tmplbis(t.inGraphDataTmpl,{config:t,v1:fmtChartJS(t,lgtxt,t.fmtV1),v2:fmtChartJS(t,lgtxt2,t.fmtV2),v3:fmtChartJS(t,1*e.datasets[a].data[f],t.fmtV3),v4:fmtChartJS(t,i[f],t.fmtV4),v5:fmtChartJS(t,s[f],t.fmtV5),v6:fmtChartJS(t,100*e.datasets[a].data[f]/s[f],t.fmtV6),v7:fmtChartJS(t,t1,t.fmtV7),v8:fmtChartJS(t,l+S,t.fmtV8),v9:fmtChartJS(t,t2,t.fmtV9),v10:fmtChartJS(t,l,t.fmtV10),v11:fmtChartJS(t,a,t.fmtV11),v12:fmtChartJS(t,f,t.fmtV12)});n.rotate(t.inGraphDataRotate*(Math.PI/180));n.fillText(d,0,0);n.restore();i[f]+=1*e.datasets[a].data[f]}}}}}function L(){n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(g-t.scaleTickSizeLeft,b);n.lineTo(g+T.availableWidth+t.scaleTickSizeRight,b);n.stroke();for(var r=t.showYAxisMin?-1:0;r<u.steps;r++){if(r>=0){n.beginPath();n.moveTo(g+r*h,b+t.scaleTickSizeBottom);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&r>0&&r%t.scaleXGridLinesStep==0){n.lineTo(g+r*h,b-T.availableHeight-t.scaleTickSizeTop)}else{n.lineTo(g+r*h,b)}n.stroke()}}n.lineWidth=t.scaleLineWidth;n.strokeStyle=t.scaleLineColor;n.beginPath();n.moveTo(g,b+t.scaleTickSizeBottom);n.lineTo(g,b-T.availableHeight-t.scaleTickSizeTop);n.stroke();for(var i=0;i<e.labels.length;i++){n.beginPath();n.moveTo(g-t.scaleTickSizeLeft,b-(i+1)*o);n.lineWidth=t.scaleGridLineWidth;n.strokeStyle=t.scaleGridLineColor;if(t.scaleShowGridLines&&i%t.scaleYGridLinesStep==0){n.lineTo(g+T.availableWidth+t.scaleTickSizeRight,b-(i+1)*o)}else{n.lineTo(g,b-(i+1)*o)}n.stroke()}}function A(){n.font=t.scaleFontStyle+" "+t.scaleFontSize+"px "+t.scaleFontFamily;if(t.xAxisTop||t.xAxisBottom){n.textBaseline="top";if(T.rotateLabels>90){n.save();n.textAlign="left"}else if(T.rotateLabels>0){n.save();n.textAlign="right"}else{n.textAlign="center"}n.fillStyle=t.scaleFontColor;if(t.xAxisBottom){for(var r=t.showYAxisMin?-1:0;r<u.steps;r++){n.save();if(T.rotateLabels>0){n.translate(g+(r+1)*h-t.scaleFontSize/2,T.xLabelPos);n.rotate(-(T.rotateLabels*(Math.PI/180)));n.fillText(u.labels[r+1],0,0)}else{n.fillText(u.labels[r+1],g+(r+1)*h,T.xLabelPos)}n.restore()}}}n.textAlign="right";n.textBaseline="middle";for(var i=0;i<e.labels.length;i++){if(t.scaleShowLabels){if(t.yAxisLeft){n.textAlign="right";n.fillText(fmtChartJS(t,e.labels[i],t.fmtXLabel),g-(t.scaleTickSizeLeft+3),b-i*o-o/2)}if(t.yAxisRight){n.textAlign="left";n.fillText(fmtChartJS(t,e.labels[i],t.fmtXLabel),g+T.availableWidth+(t.scaleTickSizeRight+3),b-i*o-o/2)}}}}function O(){var n=Number.MIN_VALUE;var r=Number.MAX_VALUE;for(var i=0;i<e.datasets.length;i++){for(var s=0;s<e.datasets[i].data.length;s++){if(e.datasets[i].data[s]>n){n=e.datasets[i].data[s]}if(e.datasets[i].data[s]<r){r=e.datasets[i].data[s]}}}if(Math.abs(n-r)<1e-8){n=E([n*2,1]);r=0}if(!isNaN(t.graphMin))r=t.graphMin;if(!isNaN(t.graphMax))n=t.graphMax;var o=Math.floor(f/(a*.66));var u=Math.floor(f/a*.5);return{maxValue:n,minValue:r,maxSteps:o,minSteps:u}}var s,o,u,a,f,l,c,h,p,d,g,b,S,x=0,T;if(!dynamicFunction(e,t,n,"HorizontalBar"))return;var N=0;jsGraphAnnotate[n.canvas.id]=new Array;P(n,e,t,"HorizontalBar");D(n,t);l=O();c=t.scaleShowLabels?t.scaleLabel:"";if(!t.scaleOverride){u=y(t,l.maxSteps,l.minSteps,l.maxValue,l.minValue,c);T=M(e,t,n,i,r,u.labels,true,true,true,true)}else{u={steps:t.scaleSteps,stepValue:t.scaleStepWidth,graphMin:t.scaleStartValue,graphMax:t.scaleStartValue+t.scaleSteps*t.scaleStepWidth,labels:[]};w(t,c,u.labels,u.steps,t.scaleStartValue,u.graphMax,t.scaleStepWidth);T=M(e,t,n,i,r,u.labels,true,true,true,true)}T.availableHeight=T.availableHeight-t.scaleTickSizeBottom-t.scaleTickSizeTop;T.availableWidth=T.availableWidth-t.scaleTickSizeLeft-t.scaleTickSizeRight;o=Math.floor(T.availableHeight/e.labels.length);h=Math.floor(T.availableWidth/u.steps);if(h==0)h=T.availableWidth/(e.labels.length-1);T.clrwidth=T.clrwidth-(T.availableWidth-u.steps*h);T.availableWidth=u.steps*h;T.availableHeight=e.labels.length*o;g=T.leftNotUsableSize+t.scaleTickSizeLeft;b=T.topNotUsableSize+T.availableHeight+t.scaleTickSizeTop;S=(o-t.scaleGridLineWidth*2-t.barValueSpacing*2-(t.barDatasetSpacing*e.datasets.length-1)-(t.barStrokeWidth/2*e.datasets.length-1))/e.datasets.length;var C=0;if(l.minValue<0){var C=v(t,0,u,h)}A();m(t,L,k,n,T.clrx,T.clry,T.clrwidth,T.clrheight,g+T.availableWidth/2,b-T.availableHeight/2,g,b,e);};var g=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();var L={};}